<!DOCTYPE html>
<html lang="en" data-dark="false">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-5GKLRZHLS3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-5GKLRZHLS3');
</script>

<!--
  put your analytics (e.g. Google Analytics) tracking code here
-->

  <!--
  put your search engine verification (e.g. Google Search Console) tag here
-->

  


























<meta name="viewport" content="width=device-width, initial-scale=1">

<title>FPGA'24 Tutorial Contents | UA-RCL</title>

<link rel="icon" href="/images/icon.png">

<meta name="title" content="FPGA'24 Tutorial Contents">
<meta name="description" content="University of Arizona Reconfigurable Computing Lab. ">

<meta property="og:title" content="FPGA'24 Tutorial Contents">
<meta property="og:site_title" content="UA-RCL">
<meta property="og:description" content="University of Arizona Reconfigurable Computing Lab. ">
<meta property="og:url" content="">
<meta property="og:image" content="/images/share.jpg">
<meta property="og:locale" content="en_US">

<meta property="twitter:title" content="FPGA'24 Tutorial Contents">
<meta property="twitter:description" content="University of Arizona Reconfigurable Computing Lab. ">
<meta property="twitter:url" content="">
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:image" content="/images/share.jpg">


  <meta property="og:type" content="website">


<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "WebSite",
    
    "name": "FPGA'24 Tutorial Contents",
    "description": "University of Arizona Reconfigurable Computing Lab. ",
    "headline": "FPGA'24 Tutorial Contents",
    "publisher": {
      "@type": "Organization",
      "logo": { "@type": "ImageObject", "url": "/images/icon.png" }
    },
    "url": ""
  }
</script>

<link rel="alternate" type="application/rss+xml" href="/feed.xml">

  <!-- Google Fonts -->
<!-- automatically get url from fonts used in theme file -->

<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?display=swap&&family=Barlow:ital,wght@0,200;0,400;0,500;0,600;1,200;1,400;1,500;1,600&amp;family=Roboto+Mono:ital,wght@0,200;0,400;0,500;0,600;1,200;1,400;1,500;1,600" rel="stylesheet">

<!-- Font Awesome icons (load asynchronously due to size) -->

<link href="https://use.fontawesome.com/releases/v6.3.0/css/all.css" rel="preload" as="style" onload="this.onload = null; this.rel = 'stylesheet';">
<noscript>
  <link href="https://use.fontawesome.com/releases/v6.3.0/css/all.css" rel="stylesheet">
</noscript>

  <!-- third party styles -->
<!-- https://stylishthemes.github.io/Syntax-Themes/pygments/ -->
<link href="https://cdn.jsdelivr.net/gh/StylishThemes/Syntax-Themes/pygments/css-github/pygments-tomorrow-night-eighties.css" rel="stylesheet">

<!-- include all sass in styles folder -->


  
    <link href="/_styles/-theme.css" rel="stylesheet">
  

  
    <link href="/_styles/alert.css" rel="stylesheet">
  

  
    <link href="/_styles/all.css" rel="stylesheet">
  

  
    <link href="/_styles/anchor.css" rel="stylesheet">
  

  
    <link href="/_styles/background.css" rel="stylesheet">
  

  
    <link href="/_styles/body.css" rel="stylesheet">
  

  
    <link href="/_styles/bold.css" rel="stylesheet">
  

  
    <link href="/_styles/button.css" rel="stylesheet">
  

  
    <link href="/_styles/card.css" rel="stylesheet">
  

  
    <link href="/_styles/checkbox.css" rel="stylesheet">
  

  
    <link href="/_styles/citation.css" rel="stylesheet">
  

  
    <link href="/_styles/code.css" rel="stylesheet">
  

  
    <link href="/_styles/cols.css" rel="stylesheet">
  

  
    <link href="/_styles/dark-toggle.css" rel="stylesheet">
  

  
    <link href="/_styles/feature.css" rel="stylesheet">
  

  
    <link href="/_styles/figure.css" rel="stylesheet">
  

  
    <link href="/_styles/float.css" rel="stylesheet">
  

  
    <link href="/_styles/font.css" rel="stylesheet">
  

  
    <link href="/_styles/footer.css" rel="stylesheet">
  

  
    <link href="/_styles/form.css" rel="stylesheet">
  

  
    <link href="/_styles/grid.css" rel="stylesheet">
  

  
    <link href="/_styles/header.css" rel="stylesheet">
  

  
    <link href="/_styles/heading.css" rel="stylesheet">
  

  
    <link href="/_styles/highlight.css" rel="stylesheet">
  

  
    <link href="/_styles/icon.css" rel="stylesheet">
  

  
    <link href="/_styles/image.css" rel="stylesheet">
  

  
    <link href="/_styles/link.css" rel="stylesheet">
  

  
    <link href="/_styles/list.css" rel="stylesheet">
  

  
    <link href="/_styles/main.css" rel="stylesheet">
  

  
    <link href="/_styles/paragraph.css" rel="stylesheet">
  

  
    <link href="/_styles/portrait.css" rel="stylesheet">
  

  
    <link href="/_styles/post-excerpt.css" rel="stylesheet">
  

  
    <link href="/_styles/post-info.css" rel="stylesheet">
  

  
    <link href="/_styles/post-nav.css" rel="stylesheet">
  

  
    <link href="/_styles/quote.css" rel="stylesheet">
  

  
    <link href="/_styles/rule.css" rel="stylesheet">
  

  
    <link href="/_styles/search-box.css" rel="stylesheet">
  

  
    <link href="/_styles/search-info.css" rel="stylesheet">
  

  
    <link href="/_styles/section.css" rel="stylesheet">
  

  
    <link href="/_styles/table.css" rel="stylesheet">
  

  
    <link href="/_styles/tags.css" rel="stylesheet">
  

  
    <link href="/_styles/textbox.css" rel="stylesheet">
  

  
    <link href="/_styles/tooltip.css" rel="stylesheet">
  

  
    <link href="/_styles/util.css" rel="stylesheet">
  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  


<!-- include all css in styles folder -->
<!-- 

  <link href="/_styles/presentations/esweek25/custom.css" rel="stylesheet" />

  <link href="/_styles/presentations/fpga24/custom.css" rel="stylesheet" />

  <link href="/_styles/presentations/fpga25/custom.css" rel="stylesheet" />
 -->

<!-- allow pages to customize styling via frontmatter -->

<link href="/_styles/presentations/fpga24/custom.css" rel="stylesheet">

  <!-- third party scripts -->
<script src="https://unpkg.com/@popperjs/core@2" defer></script>
<script src="https://unpkg.com/tippy.js@6" defer></script>
<script src="https://unpkg.com/mark.js@8" defer></script>

<!-- include all js in scripts folder -->


  <script src="/_scripts/anchors.js"></script>

  <script src="/_scripts/dark-mode.js"></script>

  <script src="/_scripts/fetch-tags.js"></script>

  <script src="/_scripts/search.js"></script>

  <script src="/_scripts/site-search.js"></script>

  <script src="/_scripts/tooltip.js"></script>


</head>

  <body>
    







<header class="background" style="--image: url('/images/background_v4.jpg')" data-dark="true">
  <a href="/" class="home">
    
      <span class="logo">
        
          <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!-- Created with Inkscape (http://www.inkscape.org/) -->

<svg width="105.57295mm" height="105.09794mm" viewbox="0 0 105.57295 105.09793" version="1.1" id="svg5" xml:space="preserve" sodipodi:docname="rcl_logo_exp.svg" inkscape:version="1.2.2 (732a01da63, 2022-12-09)" inkscape:export-filename="rcl_logo_exp-whiteborder.svg" inkscape:export-xdpi="96" inkscape:export-ydpi="96" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><namedview id="namedview282" pagecolor="#ffffff" bordercolor="#000000" borderopacity="0.25" inkscape:showpageshadow="2" inkscape:pageopacity="0.0" inkscape:pagecheckerboard="0" inkscape:deskcolor="#d1d1d1" inkscape:document-units="mm" showgrid="false" inkscape:zoom="1.7031072" inkscape:cx="21.137835" inkscape:cy="283.89287" inkscape:window-width="1920" inkscape:window-height="1112" inkscape:window-x="-8" inkscape:window-y="-8" inkscape:window-maximized="1" inkscape:current-layer="layer5"></namedview><defs id="defs2"></defs><g id="layer5" transform="translate(-172.2812,-313.96595)"><g id="g508-2" transform="translate(129.21565,255.02683)" inkscape:export-filename="rcl_logo_exp-whiteborder-notext.png" inkscape:export-xdpi="96" inkscape:export-ydpi="96"><rect style="fill:#0f2d42;fill-opacity:1;stroke:#ffffff;stroke-width:0.4;stroke-dasharray:none;stroke-opacity:1" id="rect111-5" width="79.977592" height="79.9776" x="56.031349" y="71.790398" ry="8.0088863" inkscape:export-filename="rcl_logo_exp-whiteborder-notext.svg" inkscape:export-xdpi="96" inkscape:export-ydpi="96"></rect><g id="g482-8" style="fill:#0f2d42;fill-opacity:1" transform="matrix(0.76136547,0,0,1,14.985439,5.8208336)"><g id="g6730-5-8-9" transform="matrix(0,-0.76136547,0.65776194,0,-56.808101,187.54076)" style="fill:#0f2d42;fill-opacity:1;stroke-width:0.647787;stroke-dasharray:none"><rect style="fill:#0f2d42;fill-opacity:1;stroke:#ffffff;stroke-width:0.647787;stroke-dasharray:none;stroke-opacity:1" id="rect324-9-9-9-3-8-5" width="20.135592" height="5.3485169" x="-163.75565" y="76.13652" ry="0" transform="rotate(-90)"></rect><rect style="fill:#0f2d42;fill-opacity:1;stroke:#ffffff;stroke-width:0.647787;stroke-dasharray:none;stroke-opacity:1" id="rect324-7-4-5-3-7-0-5" width="20.135592" height="5.3485169" x="-163.34097" y="95.558365" ry="0" transform="rotate(-90)"></rect><rect style="fill:#0f2d42;fill-opacity:1;stroke:#ffffff;stroke-width:0.647787;stroke-dasharray:none;stroke-opacity:1" id="rect324-7-9-7-5-8-3-7-9" width="20.135592" height="5.3485169" x="-163.341" y="115.13757" ry="0" transform="rotate(-90)"></rect><rect style="fill:#0f2d42;fill-opacity:1;stroke:#ffffff;stroke-width:0.647787;stroke-dasharray:none;stroke-opacity:1" id="rect324-7-9-7-5-61-4-8-4-34" width="20.135592" height="5.3485169" x="-162.89604" y="133.14856" ry="0" transform="rotate(-90)"></rect></g><g id="g6730-5-8-7-8" transform="matrix(0,-0.76136547,0.65776194,0,67.61862,187.42341)" style="fill:#0f2d42;fill-opacity:1;stroke:#ffffff;stroke-width:0.647787;stroke-dasharray:none;stroke-opacity:1"><rect style="fill:#0f2d42;fill-opacity:1;stroke:#ffffff;stroke-width:0.647787;stroke-dasharray:none;stroke-opacity:1" id="rect324-9-9-9-3-8-9-4" width="20.135592" height="5.3485169" x="-163.75565" y="76.13652" ry="0" transform="rotate(-90)"></rect><rect style="fill:#0f2d42;fill-opacity:1;stroke:#ffffff;stroke-width:0.647787;stroke-dasharray:none;stroke-opacity:1" id="rect324-7-4-5-3-7-0-7-48" width="20.135592" height="5.3485169" x="-163.34097" y="95.558365" ry="0" transform="rotate(-90)"></rect><rect style="fill:#0f2d42;fill-opacity:1;stroke:#ffffff;stroke-width:0.647787;stroke-dasharray:none;stroke-opacity:1" id="rect324-7-9-7-5-8-3-7-0-8" width="20.135592" height="5.3485169" x="-163.341" y="115.13757" ry="0" transform="rotate(-90)"></rect><rect style="fill:#0f2d42;fill-opacity:1;stroke:#ffffff;stroke-width:0.647787;stroke-dasharray:none;stroke-opacity:1" id="rect324-7-9-7-5-61-4-8-4-0-6" width="20.135592" height="5.3485169" x="-162.89604" y="133.14856" ry="0" transform="rotate(-90)"></rect></g><g id="g6730-5-8-7-9-6" transform="matrix(-1,0,0,-0.50079723,213.98073,135.28887)" style="fill:#0f2d42;fill-opacity:1;stroke:#ffffff;stroke-width:0.647787;stroke-dasharray:none;stroke-opacity:1"><rect style="fill:#0f2d42;fill-opacity:1;stroke:#ffffff;stroke-width:0.647787;stroke-dasharray:none;stroke-opacity:1" id="rect324-9-9-9-3-8-9-3-1" width="20.135592" height="5.3485169" x="-163.75565" y="76.13652" ry="0" transform="rotate(-90)"></rect><rect style="fill:#0f2d42;fill-opacity:1;stroke:#ffffff;stroke-width:0.647787;stroke-dasharray:none;stroke-opacity:1" id="rect324-7-4-5-3-7-0-7-5-0" width="20.135592" height="5.3485169" x="-163.34097" y="95.558365" ry="0" transform="rotate(-90)"></rect><rect style="fill:#0f2d42;fill-opacity:1;stroke:#ffffff;stroke-width:0.647787;stroke-dasharray:none;stroke-opacity:1" id="rect324-7-9-7-5-8-3-7-0-0-4" width="20.135592" height="5.3485169" x="-163.341" y="115.13757" ry="0" transform="rotate(-90)"></rect><rect style="fill:#0f2d42;fill-opacity:1;stroke:#ffffff;stroke-width:0.647787;stroke-dasharray:none;stroke-opacity:1" id="rect324-7-9-7-5-61-4-8-4-0-1-0" width="20.135592" height="5.3485169" x="-162.89604" y="133.14856" ry="0" transform="rotate(-90)"></rect></g><g id="g6730-5-8-7-9-2-4" transform="matrix(-1,0,0,-0.50079723,214.82372,229.54807)" style="fill:#0f2d42;fill-opacity:1;stroke:#ffffff;stroke-width:0.647787;stroke-dasharray:none;stroke-opacity:1"><rect style="fill:#0f2d42;fill-opacity:1;stroke:#ffffff;stroke-width:0.647787;stroke-dasharray:none;stroke-opacity:1" id="rect324-9-9-9-3-8-9-3-2-8" width="20.135592" height="5.3485169" x="-163.75565" y="76.13652" ry="0" transform="rotate(-90)"></rect><rect style="fill:#0f2d42;fill-opacity:1;stroke:#ffffff;stroke-width:0.647787;stroke-dasharray:none;stroke-opacity:1" id="rect324-7-4-5-3-7-0-7-5-1-1" width="20.135592" height="5.3485169" x="-163.34097" y="95.558365" ry="0" transform="rotate(-90)"></rect><rect style="fill:#0f2d42;fill-opacity:1;stroke:#ffffff;stroke-width:0.647787;stroke-dasharray:none;stroke-opacity:1" id="rect324-7-9-7-5-8-3-7-0-0-5-8" width="20.135592" height="5.3485169" x="-163.341" y="115.13757" ry="0" transform="rotate(-90)"></rect><rect style="fill:#0f2d42;fill-opacity:1;stroke:#ffffff;stroke-width:0.647787;stroke-dasharray:none;stroke-opacity:1" id="rect324-7-9-7-5-61-4-8-4-0-1-5-0" width="20.135592" height="5.3485169" x="-162.89604" y="133.14856" ry="0" transform="rotate(-90)"></rect></g></g></g><g id="g1450-2" style="display:inline;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" transform="translate(150.79512,128.10833)"><path style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" d="m 65.544921,208.81494 h -6.090089 l -3.197989,1.80756 0.02781,4.72747 -1.751943,1.00111 v 1.50166 l -5.172403,2.78086 -0.05562,2.03004 7.758607,4.67184 0.02781,5.33926 -2.502775,1.58509 v 4.14348 0" id="path1366-6"></path><path style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" d="m 60.594988,211.37333 -4.25472,2.36374" id="path1368-1"></path><path style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" d="m 67.435909,209.59358 -8.870952,4.75528 0.05562,5.11678 5.116787,3.198 v 0" id="path1370-53"></path><path style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" d="m 64.877515,212.5691 -4.8387,2.61402 -0.02781,2.2525 7.263063,4.27182" id="path1372-0"></path><path style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" d="m 67.296865,212.29102 3.948824,2.22469 0.02781,4.00444 -2.725245,1.83537" id="path1374-8"></path><path style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" d="m 67.241247,214.57133 3.809781,2.11345" id="path1376-5"></path><path style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" d="m 62.15227,216.62917 8.370395,4.97774 0.05562,23.47047 -5.951045,3.8376" id="path1378-7"></path><path style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" d="m 65.795199,249.94389 4.087868,-2.55839 h 0.639598 l 0.02781,3.5595" id="path1380-1"></path><path style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" d="m 70.6339,254.25423 -0.05562,2.41935 -4.254719,0.0278 -0.02781,-4.53281 -4.310335,-2.39154" id="path1382-18"></path><path style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" d="m 71.301307,258.75923 -6.813113,-0.11124 -0.08343,-4.61623 -5.116787,-2.8921" id="path1384-3"></path><path style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" d="m 60.456024,232.95743 -0.02797,4.66067" id="path1386-2"></path><path style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" d="m 57.035482,216.51793 0.02781,4.8387 5.20021,3.11457 6.813114,0.0834 v 19.18795 l -11.123449,6.22913 v 1.75194 l 5.144596,2.91991 0.02781,4.72746 7.925457,4.67185 v 0" id="path1388-29"></path><path style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" d="m 53.003232,214.34886 -6.395981,3.33703 0.111233,8.67629 3.837591,2.28031 3.058948,0.0556 -0.111233,2.2247 -4.060061,2.39154 -0.111233,6.00666 -1.557285,1.11234 0.111236,2.66963 4.115676,2.50278 2.169073,0.0556 2.447157,-1.41824" id="path1390-5"></path><path style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" d="m 52.891999,216.18423 -4.894318,2.89209 0.166851,6.28475 3.058949,1.9466 h 3.781972 l 0.05562,4.1713 -4.449379,2.61401 -0.05562,7.67518 1.724133,0.88987 h 2.44716 l 3.503885,-2.05783 v 0" id="path1392-29"></path><path style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" d="m 52.175723,235.55648 -0.06236,3.54205 2.335924,1.44605 h 10.28919" id="path1394-1"></path><path style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" d="m 56.952057,234.53792 0.222469,4.39376 4.727467,0.16685 2.502775,-2.00222 -0.05562,-3.44827 -6.117897,-3.89321 -0.111233,-4.22691" id="path1396-7"></path><path style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" d="m 53.670641,223.13638 9.42379,5.32113 3.609968,2.14719" id="path1398-4"></path><path style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" d="m 66.406989,233.36995 v 8.34259 l -11.790857,6.7853 -0.05562,4.61624 5.005551,3.11456 0.22247,7.56395 5.228021,3.00332" id="path1400-54"></path><path style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" d="m 64.682853,244.43779 -8.787524,5.00555 0.05562,2.94771 5.339255,3.11457 0.05562,7.39709 6.729685,3.8932" id="path1402-0"></path><path style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" d="m 61.512671,260.45555 8.954376,5.33925 0.111236,1.39044 -2.558394,1.89098 -2.44716,0.0556 -11.902088,-6.50721" id="path1404-5"></path><path style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" d="m 57.091101,262.48558 -0.08343,-3.19799 1.223578,-1.00111 -0.166851,-1.22358 -5.394873,-3.28142 v -4.22691 l -7.61956,-4.39376 -2.05784,-0.0556 -0.166851,-5.83981 2.391542,-1.55728 0.166852,-8.34259" id="path1406-5"></path><path style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" d="m 47.693763,232.60202 0.08145,5.94034 -4.894315,2.94771" id="path1408-9"></path><path style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" d="m 44.994351,243.26982 6.00666,3.2258 4.838703,0.16686 3.921014,-2.36374" id="path1410-5"></path><path style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" d="m 45.99546,248.21976 3.83759,2.00222 -0.05562,3.5595" id="path1412-1"></path><path style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" d="m 43.504612,246.93654 0.01391,2.96128 4.312312,2.82694 -0.166851,2.72524 4.338145,0.0556 2.780861,1.55728 0.222469,4.00444" id="path1414-3"></path><path style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" d="m 51.974314,259.56568 -0.02781,-2.83648 h -4.282527" id="path1416-4"></path><path style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" d="m 42.76966,237.3744 c 0,-4.61624 0,-4.61624 0,-4.61624 l -1.279197,-1.33481 -0.166852,-2.05784 3.2258,-1.89098 -0.05561,-5.45049" id="path1418-2"></path><path style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" d="m 53.003232,221.02293 11.790857,6.89653 3.086757,0.0556 0.02085,-1.69633" id="path1420-07"></path><ellipse style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" id="path1504-08-3" cx="45.383671" cy="247.99728" rx="0.5839811" ry="0.55617243"></ellipse><ellipse style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" id="path1504-28-7" cx="49.777435" cy="254.11519" rx="0.5839811" ry="0.55617243"></ellipse><ellipse style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" id="path1504-19-23" cx="52.029938" cy="260.20529" rx="0.5839811" ry="0.55617243"></ellipse><ellipse style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" id="path1504-19-4-9" cx="47.079998" cy="256.75702" rx="0.5839811" ry="0.55617243"></ellipse><ellipse style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" id="path1504-19-9-9" cx="65.405884" cy="267.21304" rx="0.5839811" ry="0.55617243"></ellipse><ellipse style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" id="path1504-19-2-6" cx="68.464828" cy="267.07401" rx="0.5839811" ry="0.55617243"></ellipse><ellipse style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" id="path1504-19-48-3" cx="71.329117" cy="264.29315" rx="0.5839811" ry="0.55617243"></ellipse><ellipse style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" id="path1504-19-22-6" cx="71.774055" cy="258.67581" rx="0.5839811" ry="0.55617243"></ellipse><ellipse style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" id="path1504-19-6-7" cx="70.606094" cy="253.61464" rx="0.5839811" ry="0.55617243"></ellipse><ellipse style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" id="path1504-19-6-4-5" cx="70.550476" cy="251.50117" rx="0.5839811" ry="0.55617243"></ellipse><ellipse style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" id="path1504-19-6-5-2" cx="61.484863" cy="249.52678" rx="0.5839811" ry="0.55617243"></ellipse><ellipse style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" id="path1504-19-6-3-4" cx="58.898663" cy="250.94501" rx="0.5839811" ry="0.55617243"></ellipse><ellipse style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" id="path1504-19-6-1-95" cx="64.237915" cy="249.05403" rx="0.5839811" ry="0.55617243"></ellipse><ellipse style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" id="path1504-19-6-2-0" cx="65.044365" cy="244.32655" rx="0.5839811" ry="0.55617243"></ellipse><ellipse style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" id="path1504-19-6-46-2" cx="60.289093" cy="243.90944" rx="0.5839811" ry="0.55617243"></ellipse><ellipse style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" id="path1504-19-6-46-1-6" cx="56.924252" cy="243.93724" rx="0.5839811" ry="0.55617243"></ellipse><ellipse style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" id="path1504-19-6-46-7-96" cx="65.461494" cy="250.2498" rx="0.5839811" ry="0.55617243"></ellipse><ellipse style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" id="path1504-85-8" cx="53.225704" cy="262.40216" rx="0.5839811" ry="0.55617243"></ellipse><ellipse style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" id="path1504-02-1" cx="55.061073" cy="261.65134" rx="0.5839811" ry="0.55617243"></ellipse><ellipse style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" id="path1504-4-4" cx="57.091103" cy="263.04178" rx="0.5839811" ry="0.55617243"></ellipse><ellipse style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" id="path1504-55" cx="44.465988" cy="221.49547" rx="0.5839811" ry="0.55617243"></ellipse><ellipse style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" id="path1504-07-5" cx="45.383739" cy="228.80641" rx="0.5839811" ry="0.55617243"></ellipse><ellipse style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" id="path1504-98-6" cx="42.788136" cy="237.77306" rx="0.5839811" ry="0.55617243"></ellipse><ellipse style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" id="path1504-24-2" cx="44.439884" cy="242.8856" rx="0.5839811" ry="0.55617243"></ellipse><ellipse style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" id="path1504-25-2" cx="43.496029" cy="246.30707" rx="0.5839811" ry="0.55617243"></ellipse><ellipse style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" id="path1504-8-7" cx="53.426178" cy="214.09798" rx="0.5839811" ry="0.55617243"></ellipse><ellipse style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" id="path1504-1-04" cx="53.406517" cy="215.86771" rx="0.5839811" ry="0.55617243"></ellipse><ellipse style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" id="path1504-1-2-4" cx="57.024632" cy="234.19426" rx="0.5839811" ry="0.55617243"></ellipse><ellipse style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" id="path1504-1-0-62" cx="60.446106" cy="232.34587" rx="0.5839811" ry="0.55617243"></ellipse><ellipse style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" id="path1504-1-0-6-2" cx="67.09243" cy="230.87111" rx="0.5839811" ry="0.55617243"></ellipse><ellipse style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" id="path1504-1-0-65-0" cx="66.384537" cy="232.97511" rx="0.5839811" ry="0.55617243"></ellipse><ellipse style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" id="path1504-1-0-7-4" cx="54.547009" cy="239.03152" rx="0.5839811" ry="0.55617243"></ellipse><ellipse style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" id="path1504-1-0-7-3-30" cx="52.167706" cy="234.92181" rx="0.5839811" ry="0.55617243"></ellipse><ellipse style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" id="path1504-1-0-7-9-2" cx="65.22438" cy="240.42764" rx="0.5839811" ry="0.55617243"></ellipse><ellipse style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" id="path1504-1-0-7-8-4" cx="47.645061" cy="232.05092" rx="0.5839811" ry="0.55617243"></ellipse><ellipse style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" id="path1504-1-0-7-1-6" cx="64.064224" cy="222.94664" rx="0.5839811" ry="0.55617243"></ellipse><ellipse style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" id="path1504-1-0-7-96-6" cx="67.800316" cy="222.06178" rx="0.5839811" ry="0.55617243"></ellipse><ellipse style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" id="path1504-1-9-3" cx="60.44611" cy="238.08768" rx="0.5839811" ry="0.55617243"></ellipse><ellipse style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" id="path1504-3-91" cx="52.541313" cy="220.70497" rx="0.5839811" ry="0.55617243"></ellipse><ellipse style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" id="path1504-14-9" cx="53.091896" cy="222.84831" rx="0.5839811" ry="0.55617243"></ellipse><ellipse style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" id="path1504-6-72" cx="57.044292" cy="216.00536" rx="0.5839811" ry="0.55617243"></ellipse><ellipse style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" id="path1504-0-93" cx="66.050247" cy="208.86746" rx="0.5839811" ry="0.55617243"></ellipse><ellipse style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" id="path1504-2-7" cx="61.134335" cy="210.99113" rx="0.5839811" ry="0.55617243"></ellipse><ellipse style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" id="path1504-9-4" cx="67.918297" cy="209.31972" rx="0.5839811" ry="0.55617243"></ellipse><ellipse style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" id="path1504-5-6" cx="66.758141" cy="212.01364" rx="0.5839811" ry="0.55617243"></ellipse><ellipse style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" id="path1504-69-4" cx="65.322701" cy="212.2496" rx="0.5839811" ry="0.55617243"></ellipse><ellipse style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" id="path1504-62-4" cx="66.679489" cy="214.1963" rx="0.5839811" ry="0.55617243"></ellipse><ellipse style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" id="path1504-16-7" cx="61.684917" cy="216.33965" rx="0.5839811" ry="0.55617243"></ellipse><ellipse style="fill:#000000;fill-opacity:0;stroke:#a0f633;stroke-width:0.5;stroke-dasharray:none;stroke-opacity:1" id="path1504-1-0-7-0-6" cx="67.832184" cy="225.66002" rx="0.5839811" ry="0.55617243"></ellipse></g><path id="rect3573-9" style="display:inline;fill:#cb2eb7;stroke:#000000;stroke-width:0.499999" d="m 228.19657,343.63707 13.53013,-3.3676 0.1637,11.1831 -13.64706,-0.53788 z"></path><path id="rect3575-4" style="display:inline;fill:#2abb11;stroke:#000000;stroke-width:0.499999" d="m 234.82749,351.33417 7.06939,0.24555 9.99265,-2.30352 0.18944,18.16736 -17.64904,-2.61523 z"></path><path id="rect3577-26" style="display:inline;fill:#6b9cca;stroke:#000000;stroke-width:0.499999" d="m 228.25327,351.06612 6.53255,0.28063 -0.0234,21.81483 -6.50916,1.56687 z"></path><path id="rect3579-1" style="display:inline;fill:#6c69ed;stroke:#000000;stroke-width:0.499999" d="m 234.9528,373.40053 9.72927,1.77734 1.30962,9.37908 -7.43743,2.85309 z"></path><path id="rect3583-3" style="display:inline;fill:#b4e229;stroke:#000000;stroke-width:0.499999" d="m 228.33812,388.66486 10.26876,-1.47332 0.0724,9.84554 -7.85772,0.5709 -2.4367,-2.33861 z"></path><path id="rect3591-9" style="display:inline;fill:#936ae4;stroke:#000000;stroke-width:0.499999" d="m 252.3194,358.45963 8.17149,-2.87734 1.05833,3.52023 -2.18529,6.64766 -6.96185,1.67946 z"></path><path id="rect3605-8" style="display:inline;fill:#eace0d;stroke:#000000;stroke-width:0.499999" d="m 246.2498,384.7246 5.8031,2.5257 -0.65481,4.63017 -12.49151,5.23849 -0.21048,-9.70509 z"></path><path id="rect9040-23" style="fill:#ff9d0a;stroke:#000000;stroke-width:0.4" d="m 234.99965,365.37766 17.11862,2.24506 7.20291,-1.44993 1.26285,3.90547 -1.91766,7.36662 -23.7135,-3.97563 z"></path><path id="rect9491-8" style="fill:#ea4519;stroke:#000000;stroke-width:0.4" d="m 241.71147,340.09735 4.81753,-1.19269 7.75248,4.63044 1.81242,4.77076 -14.19534,3.13374 z"></path><path id="rect9522-16" style="fill:#16c6de;stroke:#000000;stroke-width:0.4" d="m 252.0247,349.63883 4.25627,-1.26285 2.40877,1.5201 1.82411,5.23848 -8.29036,3.16881 z"></path><path id="rect9554-0" style="fill:#ff2424;stroke:#000000;stroke-width:0.4" d="m 244.58795,375.15304 13.98488,2.47892 -6.31424,9.40121 -6.2207,-2.57247 z"></path><path id="rect9583-8" style="fill:#fbee68;stroke:#000000;stroke-width:0.4" d="m 230.95386,337.57162 c 1.59566,-0.96867 4.08206,-2.60762 4.08206,-2.60762 0,0 6.59375,0.21638 9.24801,0.38594 l 2.1749,3.53131 -18.17098,4.41997 z"></path><path id="rect9616-5" style="fill:#ffb3a1;stroke:#000000;stroke-width:0.4" d="m 228.19429,374.91921 6.59489,-1.70719 3.83532,13.89134 -10.33666,1.28624 z"></path><g id="g9674-05" style="display:inline" transform="translate(101.69898,138.34557)"><text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:1.5875px;font-family:'Cascadia Code';-inkscape-font-specification:'Cascadia Code, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;fill:#000000;fill-opacity:1;stroke:#000000;stroke-width:0.2;stroke-dasharray:none;stroke-opacity:0" x="140.46411" y="221.64395" id="text3690-49"><tspan id="tspan3688-1" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:1.5875px;font-family:'Cascadia Code';-inkscape-font-specification:'Cascadia Code, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;fill:#000000;fill-opacity:1;stroke:#000000;stroke-width:0.2;stroke-dasharray:none;stroke-opacity:0" x="140.46411" y="221.64395">CPU</tspan></text><text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:1.5875px;font-family:'Cascadia Code';-inkscape-font-specification:'Cascadia Code, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;display:inline;fill:#000000;fill-opacity:1;stroke:#000000;stroke-width:0.2;stroke-dasharray:none;stroke-opacity:0" x="147.4772" y="243.1059" id="text3690-9-0"><tspan id="tspan3688-39-7" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:1.5875px;font-family:'Cascadia Code';-inkscape-font-specification:'Cascadia Code, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;fill:#000000;fill-opacity:1;stroke:#000000;stroke-width:0.2;stroke-dasharray:none;stroke-opacity:0" x="147.4772" y="243.1059">PGA</tspan></text><text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:1.5875px;font-family:'Cascadia Code';-inkscape-font-specification:'Cascadia Code, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;display:inline;fill:#000000;fill-opacity:1;stroke:#000000;stroke-width:0.2;stroke-dasharray:none;stroke-opacity:0" x="-218.03915" y="154.19006" id="text3690-42-6" transform="rotate(-90)"><tspan id="tspan3688-42-3" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:1.5875px;font-family:'Cascadia Code';-inkscape-font-specification:'Cascadia Code, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;fill:#000000;fill-opacity:1;stroke:#000000;stroke-width:0.2;stroke-dasharray:none;stroke-opacity:0" x="-218.03915" y="154.19006">Counter</tspan></text><text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:1.5875px;font-family:'Cascadia Code';-inkscape-font-specification:'Cascadia Code, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;display:inline;fill:#000000;fill-opacity:1;stroke:#000000;stroke-width:0.2;stroke-dasharray:none;stroke-opacity:0" x="-244.84966" y="130.67407" id="text3690-42-2-0" transform="rotate(-90)"><tspan id="tspan3688-42-2-2" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:1.5875px;font-family:'Cascadia Code';-inkscape-font-specification:'Cascadia Code, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;fill:#000000;fill-opacity:1;stroke:#000000;stroke-width:0.2;stroke-dasharray:none;stroke-opacity:0" x="-244.84966" y="130.67407">UART</tspan></text><text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:1.5875px;font-family:'Cascadia Code';-inkscape-font-specification:'Cascadia Code, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;display:inline;fill:#000000;fill-opacity:1;stroke:#000000;stroke-width:0.2;stroke-dasharray:none;stroke-opacity:0" x="144.20482" y="207.38016" id="text3690-64-3"><tspan id="tspan3688-7-4" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:1.5875px;font-family:'Cascadia Code';-inkscape-font-specification:'Cascadia Code, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;fill:#000000;fill-opacity:1;stroke:#000000;stroke-width:0.2;stroke-dasharray:none;stroke-opacity:0" x="144.20482" y="207.38016">Timer</tspan></text><text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:1.5875px;font-family:'Cascadia Code';-inkscape-font-specification:'Cascadia Code, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;display:inline;fill:#000000;fill-opacity:1;stroke:#000000;stroke-width:0.2;stroke-dasharray:none;stroke-opacity:0" x="136.99393" y="233.23317" id="text3690-6-85"><tspan style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:1.5875px;font-family:'Cascadia Code';-inkscape-font-specification:'Cascadia Code, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;fill:#000000;fill-opacity:1;stroke:#000000;stroke-width:0.2;stroke-dasharray:none;stroke-opacity:0" x="136.99393" y="233.23317" id="tspan9489-0">Neuromorphic Core</tspan></text><text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:1.5875px;font-family:'Cascadia Code';-inkscape-font-specification:'Cascadia Code, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;display:inline;fill:#000000;fill-opacity:1;stroke:#000000;stroke-width:0.2;stroke-dasharray:none;stroke-opacity:0" x="132.09462" y="209.02898" id="text3690-4-4"><tspan id="tspan3688-3-5" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:1.5875px;font-family:'Cascadia Code';-inkscape-font-specification:'Cascadia Code, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;fill:#000000;fill-opacity:1;stroke:#000000;stroke-width:0.2;stroke-dasharray:none;stroke-opacity:0" x="132.09462" y="209.02898">GPU</tspan></text><text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:1.5875px;font-family:'Cascadia Code';-inkscape-font-specification:'Cascadia Code, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;display:inline;fill:#000000;fill-opacity:1;stroke:#000000;stroke-width:0.2;stroke-dasharray:none;stroke-opacity:0" x="133.34428" y="199.92447" id="text3690-4-6-28"><tspan id="tspan3688-3-7-3" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:1.5875px;font-family:'Cascadia Code';-inkscape-font-specification:'Cascadia Code, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;fill:#000000;fill-opacity:1;stroke:#000000;stroke-width:0.2;stroke-dasharray:none;stroke-opacity:0" x="133.34428" y="199.92447">Filter</tspan></text><text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:1.5875px;font-family:'Cascadia Code';-inkscape-font-specification:'Cascadia Code, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;fill:#000000;fill-opacity:1;stroke:#000000;stroke-width:0.2;stroke-dasharray:none;stroke-opacity:0" x="-228.88995" y="130.6046" id="text5225-82" transform="rotate(-90)"><tspan id="tspan5223-04" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:1.5875px;font-family:'Cascadia Code';-inkscape-font-specification:'Cascadia Code, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;stroke-width:0.2" x="-228.88995" y="130.6046">nvSRAM</tspan></text><text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:1.5875px;font-family:'Cascadia Code';-inkscape-font-specification:'Cascadia Code, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;fill:#000000;fill-opacity:1;stroke:#000000;stroke-width:0.2;stroke-dasharray:none;stroke-opacity:0" x="136.61221" y="241.72095" id="text5984-0"><tspan style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:1.5875px;font-family:'Cascadia Code';-inkscape-font-specification:'Cascadia Code, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;stroke-width:0.2" x="136.61221" y="241.72095" id="tspan4246-7">Custom</tspan><tspan style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:1.5875px;font-family:'Cascadia Code';-inkscape-font-specification:'Cascadia Code, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;stroke-width:0.2" x="136.61221" y="243.70532" id="tspan6487-64">Logic</tspan></text><text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:1.5875px;font-family:'Cascadia Code';-inkscape-font-specification:'Cascadia Code, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;display:inline;fill:#000000;fill-opacity:1;stroke:#000000;stroke-width:0.2;stroke-dasharray:none;stroke-opacity:0" x="129.87502" y="254.96727" id="text5984-4-0"><tspan id="tspan5982-3-4" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:1.5875px;font-family:'Cascadia Code';-inkscape-font-specification:'Cascadia Code, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;stroke-width:0.2" x="129.87502" y="254.96727">ADC</tspan></text><text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:1.5875px;font-family:'Cascadia Code';-inkscape-font-specification:'Cascadia Code, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;display:inline;fill:#000000;fill-opacity:1;stroke:#000000;stroke-width:0.2;stroke-dasharray:none;stroke-opacity:0" x="140.90504" y="253.85649" id="text5984-1-7"><tspan id="tspan5982-4-62" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:1.5875px;font-family:'Cascadia Code';-inkscape-font-specification:'Cascadia Code, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;stroke-width:0.2" x="140.90504" y="253.85649">USB</tspan></text><text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:1.5875px;font-family:'Cascadia Code';-inkscape-font-specification:'Cascadia Code, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;display:inline;fill:#000000;fill-opacity:1;stroke:#000000;stroke-width:0.2;stroke-dasharray:none;stroke-opacity:0" x="153.40811" y="223.60866" id="text5984-1-9-9"><tspan id="tspan5982-4-6-6" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:1.5875px;font-family:'Cascadia Code';-inkscape-font-specification:'Cascadia Code, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;stroke-width:0.2" x="153.40811" y="223.60866">I2C</tspan></text></g></g></svg>

        
      </span>
    
    
      <span class="title" data-tooltip="Home">
        
          <span>UA-RCL</span>
        
        
          <span>University of Arizona Reconfigurable Computing Lab</span>
        
      </span>
    
  </a>

  <input class="nav-toggle" type="checkbox" aria-label="show/hide nav">

  <nav>
    
    
      
        <a href="/projects/" data-tooltip="Software, datasets, and more">
          Projects
        </a>
      
    
      
        <a href="/team/" data-tooltip="About our team">
          Team
        </a>
      
    
      
        <a href="/presentations/" data-tooltip="Archive of presentations and tutorials">
          Presentations
        </a>
      
    
      
        <a href="/blog/" data-tooltip="Musings and miscellany">
          Blog
        </a>
      
    
      
        <a href="/contact/" data-tooltip="Email, address, and location">
          Contact
        </a>
      
    
  </nav>
</header>

    <main>
      <!--
  modify main content of page:
  - add section breaks
  - attach section properties
  - wrap each table in div to allow for scrolling
  - filter out blank sections
-->








  
  
  

  <section class="background" data-size="page">
    <h1 id="fpga24-tutorial-archive">FPGA’24 Tutorial Archive</h1>

<p>In this tutorial, we will familiarize ourselves with setting up CEDR and performing the following set of tasks:</p>
<ul>
  <li>
<a href="#exercise-0-getting-started-with-cedr">Getting started</a> with and compiling CEDR</li>
  <li>
<a href="#exercise-1-introducing-cedr-apis-to-baseline-c-applications">Introducing CEDR APIs</a> into baseline C++ applications</li>
  <li>
<a href="#exercise-2-fpga-based-soc-experiment-zcu102-mpsoc">Conducting cross compilation-based studies</a> on Xilinx ZCU102 FPGAs</li>
</ul>

<p>Additionally, we provide a number of supplemental tutorials on topics such as:</p>
<ul>
  <li>
<a href="#supplemental-exercise-1-design-space-exploration">Performing DSE</a> by varying the number of compute resources across different scheduling heuristics in dynamically arriving workload scenarios</li>
  <li>
<a href="#supplemental-exercise-2-integration-and-evaluation-of-eft-scheduler">Integrating and evaluating scheduling heuristics</a> with CEDR and conducting performance evaluation with dynamically arriving workload scenarios.</li>
  <li><a href="#supplemental-exercise-3-introducing-a-new-api-call">Integrating new API calls</a></li>
  <li><a href="#supplemental-exercise-4-running-multiple-applications-with-cedr-on-x86">Performing experiments with many simultaneous applications</a></li>
  <li><a href="#supplemental-exercise-5-gpu-based-soc-experiment-nvidia-jetson-agx-xavier">Conducting GPU-based experiments</a></li>
</ul>

<h2 id="tutorial-requirements">Tutorial Requirements</h2>
<ul>
  <li>Ubuntu-based Linux machine or ability to run a <a href="https://hub.docker.com/r/mackncheesiest/cedr_dev/tags">docker image</a>
</li>
  <li>CEDR Source Files: <a href="https://github.com/UA-RCL/CEDR/">CEDR repository for this tutorial</a>, checked out to the <code class="language-plaintext highlighter-rouge">tutorial</code> branch.</li>
</ul>

<h1 id="exercise-0-getting-started-with-cedr">Exercise 0: Getting Started with CEDR</h1>
<p><a href="#fpga24-tutorial-archive">Return to top</a></p>

<h2 id="initial-setup">Initial Setup:</h2>
<h3 id="docker-based-instructions-linux-windows-and-mac">Docker-based Instructions (Linux, Windows, and Mac)</h3>
<p>Install Docker based on the host machine platform using the <a href="https://docs.docker.com/engine/install/#desktop">link</a>.
Pull the existing latest <a href="https://hub.docker.com/r/mackncheesiest/cedr_dev/tags">Docker container</a> with all dependencies installed.
Open a terminal in your CEDR folder and run the docker image using the following command:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run -it --rm -v $(pwd):/root/repository mackncheesiest/cedr_dev:latest /bin/bash
</code></pre></div></div>

<p>Clone CEDR from GitHub using one of the following methods:</p>
<ul>
  <li>Clone with ssh:
    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git clone <span class="nt">-b</span> tutorial git@github.com:UA-RCL/CEDR.git
</code></pre></div>    </div>
  </li>
  <li>Clone with https:
    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git clone <span class="nt">-b</span> tutorial https://github.com/UA-RCL/CEDR.git
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="linux-native-instructions-requires-root-access">Linux-native instructions (Requires root access)</h3>
<p>Install git using the following command:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>git-all
</code></pre></div></div>

<p>Clone CEDR from GitHub using one of the following methods:</p>
<ul>
  <li>Clone with ssh:
    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git clone <span class="nt">-b</span> tutorial git@github.com:UA-RCL/CEDR.git
</code></pre></div>    </div>
  </li>
  <li>Clone with https:
    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git clone <span class="nt">-b</span> tutorial https://github.com/UA-RCL/CEDR.git
</code></pre></div>    </div>
  </li>
</ul>

<p>Change your working directory to the cloned CEDR folder</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>CEDR
</code></pre></div></div>

<p>Install all the required dependencies using the following command (this will take some time):</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>bash install_dependencies.sh
</code></pre></div></div>

<h2 id="building-cedr-for-x86">Building CEDR for x86:</h2>

<p>Navigate to the <a href="https://github.com/UA-RCL/CEDR/tree/tutorial">root directory</a> and create a build folder</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir </span>build
</code></pre></div></div>
<p>Change current directory to build</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>build
</code></pre></div></div>
<p>Call cmake and make to create CEDR executables for x86</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cmake ../
make <span class="nt">-j</span> -<span class="si">$(</span><span class="nb">nproc</span><span class="si">)</span>
</code></pre></div></div>
<p>At this point there are 4 important files that should be compiled:</p>
<ul>
  <li>
<em>cedr:</em> CEDR runtime daemon</li>
  <li>
<em>sub_dag:</em> CEDR job submission process</li>
  <li>
<em>kill_daemon:</em> CEDR termination process</li>
  <li>
<em>libdash-rt/libdash-rt.so:</em> Shared object used by CEDR for API calls</li>
</ul>

<p>Look into <a href="https://github.com/UA-RCL/CEDR/tree/tutorial/libdash/dash.h">dash.h</a> under <a href="https://github.com/UA-RCL/CEDR/tree/tutorial/libdash">libdash</a> folder and see available API calls.</p>

<h1 id="exercise-1-introducing-cedr-apis-to-baseline-c-applications">Exercise 1: Introducing CEDR APIs to Baseline C++ Applications</h1>
<p><a href="#fpga24-tutorial-archive">Return to top</a></p>

<h2 id="application-overview">Application Overview</h2>

<p>Move to the Radar Correlator folder in the <a href="https://github.com/UA-RCL/CEDR/tree/tutorial/applications/APIApps/radar_correlator/">applications</a> folder from <a href="https://github.com/UA-RCL/CEDR/tree/tutorial/">root directory</a></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>applications/APIApps/radar_correlator
</code></pre></div></div>

<p>Look at the <a href="https://github.com/UA-RCL/CEDR/tree/tutorial/applications/APIApps/radar_correlator/radar_correlator_non_api.c">non-API version</a> of the Radar Correlator and locate possible places for adding API calls to the application</p>
<ul>
  <li>Forward FFT call: Line 146</li>
  <li>Forward FFT call: Line 167</li>
  <li>Inverse FFT call: Line 194</li>
</ul>

<p>Change the radar correlator to have DASH_FFT API calls and create a new file to place the API calls in the file</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cp </span>radar_correlator_non_api.c radar_correlator_fft.c
</code></pre></div></div>

<p>Make sure the <a href="https://github.com/UA-RCL/CEDR/tree/tutorial/libdash/dash.h">dash.h</a> is included in the application</p>
<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">"dash.h"</span><span class="cp">
</span></code></pre></div></div>

<p>Change the <code class="language-plaintext highlighter-rouge">radar_correlator_non_api.c</code> to include <code class="language-plaintext highlighter-rouge">DASH_FFT</code> calls</p>
<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="n">gsl_fft_wrapper</span><span class="p">(</span><span class="n">fft_inp</span><span class="p">,</span> <span class="n">fft_out</span><span class="p">,</span> <span class="n">len</span><span class="p">,</span> <span class="nb">true</span><span class="p">);;</span>
<span class="o">&gt;</span><span class="n">DASH_FFT_flt</span><span class="p">(</span><span class="n">fft_inp</span><span class="p">,</span> <span class="n">fft_out</span><span class="p">,</span> <span class="n">len</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>

<span class="o">&lt;</span><span class="n">gsl_fft_wrapper</span><span class="p">(</span><span class="n">fft_inp</span><span class="p">,</span> <span class="n">fft_out</span><span class="p">,</span> <span class="n">len</span><span class="p">,</span> <span class="nb">true</span><span class="p">);;</span>
<span class="o">&gt;</span><span class="n">DASH_FFT_flt</span><span class="p">(</span><span class="n">fft_inp</span><span class="p">,</span> <span class="n">fft_out</span><span class="p">,</span> <span class="n">len</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>

<span class="o">&lt;</span><span class="n">gsl_fft_wrapper</span><span class="p">(</span><span class="n">fft_inp</span><span class="p">,</span> <span class="n">fft_out</span><span class="p">,</span> <span class="n">len</span><span class="p">,</span> <span class="nb">false</span><span class="p">);</span>
<span class="o">&gt;</span><span class="n">DASH_FFT_flt</span><span class="p">(</span><span class="n">fft_inp</span><span class="p">,</span> <span class="n">fft_out</span><span class="p">,</span> <span class="n">len</span><span class="p">,</span> <span class="nb">false</span><span class="p">);</span>
</code></pre></div></div>

<p>Build radar correlator without API calls and observe the output</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make non-api
./radar_correlator_non_api-x86.out
</code></pre></div></div>

<p>Build radar correlator with API calls (standalone execution outside CEDR) and compare the output against non-api version</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make standalone
./radar_correlator_fft-x86.out
</code></pre></div></div>

<p>Build radar correlator shared object to be used with CEDR</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make api
</code></pre></div></div>

<p>Copy the shared object and any input data files to the CEDR build folder</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cp </span>radar_correlator_fft-x86.so ../../../build
<span class="nb">cp</span> <span class="nt">-r</span> input/ ../../../build
</code></pre></div></div>

<h2 id="cpu-based-preliminary-validation-of-the-api-based-code">CPU-based Preliminary Validation of the API Based Code</h2>

<p>Move back to the CEDR build folder containing CEDR binaries</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> ../../../build
</code></pre></div></div>

<p>Copy the daemon configuration file from the <a href="https://github.com/UA-RCL/CEDR/tree/tutorial/./">root repository</a> base directory to the build folder</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cp</span> ../daemon_config.json ./
</code></pre></div></div>

<p>Observe the contents of the <code class="language-plaintext highlighter-rouge">daemon_config.json</code></p>
<ul>
  <li>
<em>Worker Threads</em>: Specify the number of PEs for each resource</li>
  <li>
<em>Features</em>: Enable/Disable CEDR features
    <ul>
      <li>
<em>Cache Schedules</em>: Enable/<strong>Disable</strong> schedule caching</li>
      <li>
<em>Enable Queueing</em>: <strong>Enable</strong>/Disable Queueing</li>
      <li>
<em>Use PAPI</em>: Enable/<strong>Disable</strong> PAPI based performance counters</li>
      <li>
<em>Loosen Thread Permissions</em>: Thread permission setup (<strong>Enable</strong>/Disable)</li>
      <li>
<em>Fixed Periodic Injection</em>: Inject jobs with fixed injection rate</li>
      <li>
<em>Exit When Idle</em>: Kill CEDR once the all running applications are terminated</li>
    </ul>
  </li>
  <li>
<em>Scheduler</em>: Type of scheduler to use (SIMPLE, RANDOM, EFT, ETF, MET, or HEFT_RT)</li>
  <li>
<em>Random Seed</em>: Seed to be used on random operations</li>
  <li>
<em>DASH Binary Path</em>: List of paths to the libdash shared objects</li>
</ul>

<p>Modify the <code class="language-plaintext highlighter-rouge">daemon_config.json</code> file to set the number of CPUs to 3 (or any other number).</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"Worker Threads": {
  "cpu": &lt;b&gt;3&lt;/b&gt;,
  "fft": 0,
  "gemm": 0,
  "gpu": 0
},
</code></pre></div></div>

<p>Run CEDR using the config file</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./cedr <span class="nt">-c</span> ./daemon_config.json
</code></pre></div></div>

<p>Push CEDR to the background or open another terminal and navigate to the same build folder (<a href="https://github.com/UA-RCL/CEDR/tree/tutorial/">root repository</a>/build)</p>
<ul>
  <li>Option 1: Ctrl+z or run CEDR with <code class="language-plaintext highlighter-rouge">./cedr -c ./daemon_config.json &amp;</code> in the previous step. Now this terminal can be used for running next steps.</li>
  <li>Option 2: Open a second terminal and go to CEDR build directory, <code>cd ${repo_root}/build</code>. Now this second terminal can be used for running next steps.</li>
</ul>

<p>Run <code class="language-plaintext highlighter-rouge">sub_dag</code> to submit application(s) to CEDR</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./sub_dag <span class="nt">-a</span> ./radar_correlator_fft-x86.so <span class="nt">-n</span> 1 <span class="nt">-p</span> 0
</code></pre></div></div>

<ul>
  <li>We use <code class="language-plaintext highlighter-rouge">-a</code> to specify the application shared object to be submitted</li>
  <li>We use <code class="language-plaintext highlighter-rouge">-n</code> to specify the number of instances that are to be submitted</li>
  <li>We use <code class="language-plaintext highlighter-rouge">-p</code> to specify the injection rate (waiting period between two instances in microsecond unit) when <code class="language-plaintext highlighter-rouge">-n</code> is more than 1
    <ul>
      <li>This is an optional argument, if not set it will be set to 0 by default</li>
    </ul>
  </li>
</ul>

<p>Look at the results and terminate CEDR using <code class="language-plaintext highlighter-rouge">kill_daemon</code></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./kill_daemon
</code></pre></div></div>

<p>Now, observe the log files generated in <code class="language-plaintext highlighter-rouge">log_dir/experiment0</code>.</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">appruntime_trace.log</code> stores the execution time of the application.</li>
  <li>
<code class="language-plaintext highlighter-rouge">schedule_trace.log</code> tracks the ready queue size and overhead of each scheduling decision.</li>
  <li>
<code class="language-plaintext highlighter-rouge">timing_trace.log</code> stores the computing resource and execution time of the API call.</li>
</ul>

<p>We can generate a Gantt chart showing the distribution of tasks to the processing elements. Navigate the <code class="language-plaintext highlighter-rouge">scripts/</code> folder from the <a href="https://github.com/UA-RCL/CEDR/tree/tutorial/./">root directory</a> and run <code class="language-plaintext highlighter-rouge">gantt_k-nk.py</code> script.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd scripts/
python3 gantt_k-nk.py ../build/log_dir/experiment0/timing_trace.log
</code></pre></div></div>

<p>Having built CEDR and compiled radar correlator application, we can proceed to performing design-space exploration now.</p>

<h1 id="exercise-2-fpga-based-soc-experiment-zcu102-mpsoc">Exercise 2: FPGA Based SoC Experiment (ZCU102 MPSoC)</h1>
<p><a href="#fpga24-tutorial-archive">Return to top</a></p>

<p>(Conv2d (accelerator) is not included in HCW release.)
Moving on to the aarch64-based build for ZCU102 FPGA with accelerators. We’ll start by building CEDR itself. This time we will use the <a href="https://github.com/UA-RCL/CEDR/tree/tutorial/toolchains/aarch64-linux-gnu.toolchain.cmake">toolchain</a> file for cross-compilation. If you are on Ubuntu 22.04, the toolchain requires running inside the docker container.
Simply run the following commands from the repository root folder:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir </span>build-arm
<span class="nb">cd </span>build-arm
cmake <span class="nt">-DLIBDASH_MODULES</span><span class="o">=</span><span class="s2">"FFT GEMM"</span> <span class="nt">--toolchain</span><span class="o">=</span>../toolchains/aarch64-linux-gnu.toolchain.cmake ..
make <span class="nt">-j</span> <span class="si">$(</span><span class="nb">nproc</span><span class="si">)</span>
</code></pre></div></div>

<p>This will create an executable file for <code class="language-plaintext highlighter-rouge">cedr</code>, <code class="language-plaintext highlighter-rouge">sub_dag</code>, <code class="language-plaintext highlighter-rouge">kill_deamon</code>, and <code class="language-plaintext highlighter-rouge">libdash-rt</code> for aarch64 platforms. We can check the platform type of an executable using the <code class="language-plaintext highlighter-rouge">file</code> command:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>file cedr
</code></pre></div></div>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cedr: ELF 64-bit LSB shared object, &lt;b&gt;ARM aarch64&lt;/b&gt;, version 1 (GNU/Linux), dynamically linked, interpreter /lib/ld-linux-aarch64.so.1, BuildID[sha1]=7374bd01c8ded1d48f9dd191e9010496bdffae34, for GNU/Linux 3.7.0, not stripped
</code></pre></div></div>

<p>Since we also used the <code class="language-plaintext highlighter-rouge">-DLIBDASH_MODULES="FFT GEMM"</code> flag, we also enabled FFT and GEMM accelerator function calls for <code class="language-plaintext highlighter-rouge">DASH_FFT</code> and <code class="language-plaintext highlighter-rouge">DASH_GEMM</code> API calls. We can test if these functions are available or not by running the following commands:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nm <span class="nt">-D</span> libdash-rt/libdash-rt.so | <span class="nb">grep</span> <span class="nt">-E</span> <span class="s1">'*_fft$|*_gemm$'</span>
</code></pre></div></div>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>0000000000006974 T &lt;b&gt;DASH_FFT_fft&lt;/b&gt;
000000000000788c T &lt;b&gt;DASH_GEMM_gemm&lt;/b&gt;
</code></pre></div></div>

<p>After this, we can go to build our application using cross-compilation for aarch64</p>

<h3 id="cross-compilation">Cross-compilation</h3>

<p>Assuming you came here after building the lane detection for x86_64, we will directly move to compile the lane detection for aarch64. First, navigate to <a href="https://github.com/UA-RCL/CEDR/tree/tutorial/applications/APIApps/lane_detection">applications/APIApps/lane_detection</a> folder. Then run the following command to build the executable for aacrh64:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>applications/APIApps/lane_detection
<span class="nv">ARCH</span><span class="o">=</span>aarch64 make fft_nb.so
file track_nb.so
</code></pre></div></div>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>track_nb.so: ELF 64-bit LSB shared object, &lt;b&gt;ARM aarch64&lt;/b&gt;, version 1 (SYSV), dynamically linked, BuildID[sha1]=fc95ba8be71bfb2f90164848211b62325f087007, not stripped
</code></pre></div></div>

<p>After verifying the file is compiled for the correct platform, copy the file and inputs to the build directory:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Assuming your CEDR build folder is in the root directory and named "build-arm"</span>
<span class="nb">cp </span>track_nb.so image.png ../../../build-arm
</code></pre></div></div>

<p>Simply, perform the same operations for pulse doppler application:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> ../pulse_doppler
<span class="nv">ARCH</span><span class="o">=</span>aarch64 make nonblocking
<span class="nb">cp</span> <span class="nt">-r</span> pulse_doppler-nb-aarch64.so input/ ../../../build-arm
</code></pre></div></div>

<h3 id="running-api-based-cedr-on-zcu102">Running API-based CEDR on ZCU102</h3>

<p>Now, change your working directory to the <code class="language-plaintext highlighter-rouge">build-arm</code> directory. Before going into the zcu102 first copy the <a href="https://github.com/UA-RCL/CEDR/tree/tutorial/daemon_config.json">daemon_config.json</a> file to the <code class="language-plaintext highlighter-rouge">build-arm</code> directory and create an output folder. From the build-arm directory, run:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> ../../../build-arm
<span class="nb">cp</span> ../daemon_config.json ./
<span class="nb">mkdir </span>output/
</code></pre></div></div>

<p>Now we will ssh into the ZCU102, and enter the password when prompted:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh &lt;user-name&gt;@&lt;zcu102-ip&gt;
</code></pre></div></div>

<p>If you like, you can create a folder for yourself on the board where you will be working for the remainder of this tutorial. Now create a folder in the desired working directory called <code class="language-plaintext highlighter-rouge">mnt</code> and create an sshfs connection for the <code class="language-plaintext highlighter-rouge">mnt</code> directory using the build folder (<code class="language-plaintext highlighter-rouge">build-arm</code>) on your local machine:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> &lt;desired workspace&gt;
<span class="nb">mkdir </span>mnt
sshfs &lt;user_name&gt;@&lt;ip <span class="k">for </span>the localmachine&gt;:&lt;path to CEDR repository root folder&gt;/build-arm mnt
<span class="nb">cd </span>mnt
</code></pre></div></div>

<p>After these steps are completed, if you type <code class="language-plaintext highlighter-rouge">ls</code> you should see all the files you had on the local machine is also here on the zcu102.</p>

<p>Before running CEDR, we need to enable FFT and GEMM accelerator in the <a href="https://github.com/UA-RCL/CEDR/tree/tutorial/daemon_config.json">daemon_config.json</a> file and loosen the thread permission just like we did for x86_64. By the time this tutorial was written, we had 2 FFT and 2 GEMM accelerators available in the FPGA image. We can put any number between 0-2 to the corresponding fields on the <a href="https://github.com/UA-RCL/CEDR/tree/tutorial/daemon_config.json">daemon_config.json</a> file. Change the file with the following <code class="language-plaintext highlighter-rouge">Worker Threads</code> setup:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"Worker Threads"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"cpu"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fft"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nl">"gemm"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nl">"gpu"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">}</span><span class="err">,</span><span class="w">
</span><span class="err">...</span><span class="w">
</span><span class="nl">"Loosen Thread Permissions"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="err">,</span><span class="w">
</span></code></pre></div></div>
<p>Execution of CEDR is the same as the x86_64 version. In one terminal launch CEDR:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./cedr <span class="nt">-c</span> ./daemon_config.json <span class="nt">-l</span> NONE &amp;
</code></pre></div></div>
<p>After launching CEDR, you should see the function handles for FFT and GEMM accelerators are successfully grabbed.</p>

<p>In another terminal, we will submit an instance of <code class="language-plaintext highlighter-rouge">lane_detection</code> and five instances of <code class="language-plaintext highlighter-rouge">pulse doppler</code> using <code class="language-plaintext highlighter-rouge">sub_dag</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./sub_dag <span class="nt">-a</span> ./track_nb.so,./pulse_doppler-nb-aarch64.so <span class="nt">-n</span> 1,5 <span class="nt">-p</span> 0,100
</code></pre></div></div>

<p>Now kill the CEDR by running <code class="language-plaintext highlighter-rouge">./kill_deamon</code> on the second terminal and check the resource_name fields for the first 10 FFT tasks:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">head</span> <span class="nt">-n</span> 10 ./log_dir/experiment0/timing_trace.log
</code></pre></div></div>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>app_id: 0, app_name: track_nb, task_id: 0, task_name: DASH_FFT, resource_name: &lt;b&gt;cpu1&lt;/b&gt;, ref_start_time: 5248428403449098, ref_stop_time: 5248428420053817, actual_exe_time: 16604719
app_id: 0, app_name: track_nb, task_id: 1, task_name: DASH_FFT, resource_name: &lt;b&gt;cpu2&lt;/b&gt;, ref_start_time: 5248428408909254, ref_stop_time: 5248428420265209, actual_exe_time: 11355955
app_id: 0, app_name: track_nb, task_id: 3, task_name: DASH_FFT, resource_name: &lt;b&gt;fft1&lt;/b&gt;, ref_start_time: 5248428408932076, ref_stop_time: 5248428420061538, actual_exe_time: 11129462
app_id: 0, app_name: track_nb, task_id: 4, task_name: DASH_FFT, resource_name: &lt;b&gt;fft2&lt;/b&gt;, ref_start_time: 5248428409129026, ref_stop_time: 5248428420069309, actual_exe_time: 10940283
app_id: 0, app_name: track_nb, task_id: 2, task_name: DASH_FFT, resource_name: &lt;b&gt;cpu3&lt;/b&gt;, ref_start_time: 5248428409170040, ref_stop_time: 5248428420067799, actual_exe_time: 10897759
app_id: 0, app_name: track_nb, task_id: 5, task_name: DASH_FFT, resource_name: &lt;b&gt;cpu1&lt;/b&gt;, ref_start_time: 5248428420067189, ref_stop_time: 5248428420236706, actual_exe_time: 169517
app_id: 0, app_name: track_nb, task_id: 7, task_name: DASH_FFT, resource_name: &lt;b&gt;cpu3&lt;/b&gt;, ref_start_time: 5248428420072569, ref_stop_time: 5248428420260798, actual_exe_time: 188229
app_id: 0, app_name: track_nb, task_id: 9, task_name: DASH_FFT, resource_name: &lt;b&gt;fft2&lt;/b&gt;, ref_start_time: 5248428420073379, ref_stop_time: 5248428420160848, actual_exe_time: 87469
app_id: 0, app_name: track_nb, task_id: 14, task_name: DASH_FFT, resource_name: &lt;b&gt;fft2&lt;/b&gt;, ref_start_time: 5248428420165289, ref_stop_time: 5248428420259618, actual_exe_time: 94329
app_id: 0, app_name: track_nb, task_id: 8, task_name: DASH_FFT, resource_name: &lt;b&gt;fft1&lt;/b&gt;, ref_start_time: 5248428420242426, ref_stop_time: 5248428420336426, actual_exe_time: 94000
</code></pre></div></div>

<p>We can see that all the resources available for FFT execution (<code class="language-plaintext highlighter-rouge">cpu1</code>, <code class="language-plaintext highlighter-rouge">cpu2</code>, <code class="language-plaintext highlighter-rouge">cpu3</code>, <code class="language-plaintext highlighter-rouge">fft1</code>, and <code class="language-plaintext highlighter-rouge">fft2</code>) are being used.</p>

<p>Lastly, let’s compare the outputs with x86 results to validate the correctness.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>xdg-open output_fft.png
<span class="nb">cat </span>output/pulse_doppler_output.txt
</code></pre></div></div>

<h1 id="supplemental-exercises">Supplemental Exercises:</h1>

<h2 id="supplemental-exercise-1-design-space-exploration">Supplemental Exercise 1: Design Space Exploration</h2>
<p><a href="#fpga24-tutorial-archive">Return to top</a></p>

<p>CEDR comes with some scripts that makes design-space exploration (DSE) rapid and easy. Now, we will go over the flow and define how to perform DSE step by step. First, navigate to folder where we accomodate API based CEDR scripts from <a href="https://github.com/UA-RCL/CEDR/tree/tutorial/./">root directory</a>.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>scripts/scripts-API/run_scripts
</code></pre></div></div>

<p>We will initially run <a href="https://github.com/UA-RCL/CEDR/tree/tutorial/./scripts/scripts-API/run_scripts/daemon_generator.py">daemon_generator.py</a> file to generate <code class="language-plaintext highlighter-rouge">daemon_config.json</code> files for our sweeps. We can modify the following code portion to denote scheduler types and hardware compositions. We set schedulers as <code class="language-plaintext highlighter-rouge">SIMPLE, ETF, and MET</code> while hardware compositions that are going to sweeped are picked as 4 CPUs at maximum since we don’t have any accelerator on the x86 system. If there were any accelerator, we would also set the maximum number of accelerator that we would like to sweep up to.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">SCHEDS</span> <span class="o">=</span> <span class="p">[</span><span class="s">"SIMPLE"</span><span class="p">,</span> <span class="s">"ETF"</span><span class="p">,</span> <span class="s">"MET"</span><span class="p">]</span>
<span class="n">CPUS</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">FFTS</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">MMULTS</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">ZIPS</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">GPUS</span> <span class="o">=</span> <span class="mi">0</span>
</code></pre></div></div>

<p>Then, we can see that number of each processing element starts from <code class="language-plaintext highlighter-rouge">0</code> all the way up to <code class="language-plaintext highlighter-rouge">maximum number of that processing element</code> looking at nested loops between Lines 26-31 (except CPU starts from 1). By changing the boundaries of the for loops, we can control the starting point of the sweep for each processing element. For this experiment, we will keep the file same.</p>

<p>Next, we need to configure <a href="https://github.com/UA-RCL/CEDR/tree/tutorial/./scripts/scripts-API/run_scripts/run_cedr.sh">run_cedr.sh</a> and <a href="https://github.com/UA-RCL/CEDR/tree/tutorial/./scripts/scripts-API/run_scripts/run_subdag.sh">run_sub_dag.sh</a>, which will concurrently run CEDR and submit applications. In <code class="language-plaintext highlighter-rouge">run_cedr.sh</code>, we need to set the following fields identical to the daemon config generator. Periodicity denotes the delay between injecting each application instance in microseconds.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">declare</span> <span class="nt">-a</span> <span class="nv">SCHEDS</span><span class="o">=(</span><span class="s2">"SIMPLE"</span> <span class="s2">"MET"</span> <span class="s2">"ETF"</span><span class="o">)</span>
<span class="nv">CPUS</span><span class="o">=</span>3
<span class="nv">FFTS</span><span class="o">=</span>0
<span class="nv">MMULTS</span><span class="o">=</span>0
<span class="nv">ZIPS</span><span class="o">=</span>0
<span class="nv">GPUS</span><span class="o">=</span>0
<span class="c">######################################################################</span>

<span class="c"># Number of distinct period values for each workload. Use this value from the bash script that</span>
<span class="c"># runs sub_dag</span>
<span class="nv">PERIODCOUNT</span><span class="o">=</span>2
<span class="nv">PERIODS</span><span class="o">=(</span><span class="s2">"1734"</span> <span class="s2">"2313"</span><span class="o">)</span>

<span class="nb">declare</span> <span class="nt">-a</span> <span class="nv">WORKLOADS</span><span class="o">=(</span><span class="s2">"HIGH"</span> <span class="o">)</span>
</code></pre></div></div>

<p>In the case of <code class="language-plaintext highlighter-rouge">run_sub_dag.sh</code>, we need to set the following fields identical as before. In here, we also define <code class="language-plaintext highlighter-rouge">APPS</code> variable that stores the applications that we will sweep and <code class="language-plaintext highlighter-rouge">INSTS</code> variable that defines how many of each application will be submitted during each sweep.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#### All possible schedulers, and max number of allowed resources ####</span>
<span class="nb">declare</span> <span class="nt">-a</span> <span class="nv">SCHEDS</span><span class="o">=(</span><span class="s2">"SIMPLE"</span> <span class="s2">"MET"</span> <span class="s2">"ETF"</span><span class="o">)</span>
<span class="nb">declare</span> <span class="nt">-a</span> <span class="nv">CPUS</span><span class="o">=</span>3
<span class="nb">declare</span> <span class="nt">-a</span> <span class="nv">FFTS</span><span class="o">=</span>0
<span class="nb">declare</span> <span class="nt">-a</span> <span class="nv">MMULTS</span><span class="o">=</span>0
<span class="nb">declare</span> <span class="nt">-a</span> <span class="nv">ZIPS</span><span class="o">=</span>0
<span class="nb">declare</span> <span class="nt">-a</span> <span class="nv">GPUS</span><span class="o">=</span>0
<span class="c">######################################################################</span>

<span class="nv">APPS</span><span class="o">=(</span><span class="s2">"radar_correlator_fft-x86.so"</span><span class="o">)</span>
<span class="nv">INSTS</span><span class="o">=(</span><span class="s2">"5"</span><span class="o">)</span>

<span class="nb">declare</span> <span class="nt">-a</span> <span class="nv">PERIODS</span><span class="o">=(</span><span class="s2">"1734"</span> <span class="s2">"2313"</span><span class="o">)</span>
<span class="nv">PERIODCOUNT</span><span class="o">=</span>2

<span class="nb">declare</span> <span class="nt">-a</span> <span class="nv">WORKLOADS</span><span class="o">=(</span><span class="s2">"HIGH"</span><span class="o">)</span>
</code></pre></div></div>

<p>After getting everything ready, we can move scripts and configuration files to the <a href="./build/">build</a> folder for starting the DSE. We also need to create a folder named <code class="language-plaintext highlighter-rouge">schedsweep_daemon_configs</code> in <code class="language-plaintext highlighter-rouge">build</code> folder to store configuration files.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python3 daemon_generator.py
<span class="nb">mkdir</span> ../../../build/schedsweep_daemon_configs/
<span class="nb">cp </span>daemon_config<span class="k">*</span>.json ../../../build/schedsweep_daemon_configs/
<span class="nb">cp</span> <span class="k">*</span>.sh ../../../build
</code></pre></div></div>

<p>Navigate back to the <code class="language-plaintext highlighter-rouge">build</code> directory and remove all earlier log files in the <code class="language-plaintext highlighter-rouge">log_dir</code> directory.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> ../../../build
<span class="nb">rm</span> <span class="nt">-rf</span> log_dir/<span class="k">*</span>
</code></pre></div></div>

<p>Then, first execute <code class="language-plaintext highlighter-rouge">run_cedr.sh</code> for running CEDR with the DSE configurations on the first terminal. Then, pull up a new terminal and run <code class="language-plaintext highlighter-rouge">run_sub_dag.sh</code> for dynamically submitting the applications based on workload composition. If you are on Docker environment, execute the first … commands on a separate terminal to be able to pull up a second terminal running docker container.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker ps
<span class="c"># Take note of the number below "CONTAINER ID" column</span>
docker <span class="nb">exec</span> <span class="nt">-it</span> &lt;CONTAINER ID&gt; /bin/bash
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bash run_cedr.sh    <span class="c"># Execute on the first terminal</span>
bash run_sub_dag.sh <span class="c"># Execute on the second terminal</span>
</code></pre></div></div>

<p>After both scripts terminate, there should be a folder named <code class="language-plaintext highlighter-rouge">HIGH</code> in the <code class="language-plaintext highlighter-rouge">log_dir</code> containing as many files as there are trials. Each folder should have log files for each hardware composition, scheduler, and injection rate. To plot all the DSE results in a 3D format, first navigate to <code class="language-plaintext highlighter-rouge">scripts/scripts-API/</code> from <a href="https://github.com/UA-RCL/CEDR/tree/tutorial/./">root directory</a>.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>scripts/scripts-API/
</code></pre></div></div>

<p>There are two scripts named <code class="language-plaintext highlighter-rouge">makedataframe.py</code> and <code class="language-plaintext highlighter-rouge">plt3dplot_inj.py</code> for plotting 3D diagram. For each DSE experiment, following lines in <a href="https://github.com/UA-RCL/CEDR/tree/tutorial/scripts/scripts-API/makedataframe.py">makedataframe.py</a> should be modified.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">corelist</span> <span class="o">=</span> <span class="p">[</span><span class="s">' cpu1'</span><span class="p">,</span> <span class="s">' cpu2'</span><span class="p">,</span> <span class="s">' cpu3'</span><span class="p">]</span>  <span class="c1"># Line 38
</span>
<span class="c1">############# Edit parameters here ####################
# Starting from line 179
</span><span class="n">CPUS</span><span class="o">=</span><span class="mi">3</span>
<span class="n">FFTS</span><span class="o">=</span><span class="mi">0</span>
<span class="n">MMULTS</span><span class="o">=</span><span class="mi">0</span>
<span class="n">ZIPS</span><span class="o">=</span><span class="mi">0</span>

<span class="n">SCHEDS</span><span class="o">=</span><span class="p">[</span><span class="s">"SIMPLE"</span><span class="p">,</span> <span class="s">"MET"</span><span class="p">,</span> <span class="s">"ETF"</span><span class="p">]</span>

<span class="k">if</span> <span class="n">WORKLOAD</span> <span class="o">==</span> <span class="s">'HIGH'</span><span class="p">:</span>
    <span class="c1"># Use following INJ_RATES and PERIODS for High latency workload data
</span>    <span class="n">INJ_RATES</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">]</span>
    <span class="n">PERIODS</span><span class="o">=</span><span class="p">[</span><span class="mi">1734</span><span class="p">,</span> <span class="mi">2313</span><span class="p">]</span>
<span class="k">elif</span> <span class="n">WORKLOAD</span> <span class="o">==</span> <span class="s">'LOW'</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'Low workload is not specified for this setup'</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'Wrong workload type '</span><span class="p">,</span> <span class="n">WORKLOAD</span><span class="p">,</span> <span class="s">' chosen, please choose either "HIGH" or "LOW"!'</span><span class="p">)</span>
    <span class="nb">exit</span><span class="p">()</span>

<span class="n">INJ_COUNT</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">args</span><span class="p">.</span><span class="n">injectionRateCount</span><span class="p">)</span>
<span class="n">TRIALS</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">args</span><span class="p">.</span><span class="n">trial</span><span class="p">)</span>
<span class="n">corelist</span> <span class="o">=</span> <span class="p">[</span><span class="s">' cpu1'</span><span class="p">,</span> <span class="s">' cpu2'</span><span class="p">,</span> <span class="s">' cpu3'</span><span class="p">]</span>  <span class="c1"># Edit here
</span>
<span class="c1">#######################################################
</span></code></pre></div></div>

<p>To learn about the input arguments of <code class="language-plaintext highlighter-rouge">makedataframe.py</code>, execute the script with <code class="language-plaintext highlighter-rouge">-h</code> option. Then, execute <code class="language-plaintext highlighter-rouge">makedataframe.py</code> script using the given arguments below for the DSE experiment in this tutorial. Other DSE experiments may require different set of input arguments.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python3 makedataframe.py <span class="nt">-h</span>
python3 makedataframe.py <span class="nt">-i</span> ../../build/log_dir/ <span class="nt">-w</span> HIGH <span class="nt">-o</span> dataframe.csv <span class="nt">-t</span> 2 <span class="nt">-r</span> 2
</code></pre></div></div>

<p>Modify the following lines in the <a href="https://github.com/UA-RCL/CEDR/tree/tutorial/scripts/scripts-API/plt3dplot_inj.py">plt3dplot_inj.py</a>.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">### Configuration specification ###
### Starting from line 27
</span><span class="n">CPUS</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">FFTS</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">MMULTS</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">ZIPS</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">GPUS</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">WORKLOAD</span> <span class="o">=</span> <span class="s">'High'</span>
<span class="n">TRIALS</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">schedlist</span> <span class="o">=</span> <span class="p">{</span><span class="s">'SIMPLE'</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s">'MET'</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s">'ETF'</span><span class="p">:</span><span class="mi">3</span><span class="p">}</span>
<span class="n">schedmarkerlist</span> <span class="o">=</span> <span class="p">{</span><span class="s">'SIMPLE'</span><span class="p">:</span><span class="s">'o'</span><span class="p">,</span> <span class="s">'MET'</span><span class="p">:</span><span class="s">'o'</span><span class="p">,</span> <span class="s">'ETF'</span><span class="p">:</span><span class="s">'o'</span><span class="p">}</span>
<span class="n">schednamelist</span> <span class="o">=</span> <span class="p">[</span><span class="s">'RR'</span><span class="p">,</span> <span class="s">'MET'</span><span class="p">,</span> <span class="s">'ETF'</span><span class="p">]</span>
</code></pre></div></div>

<p>Execute the script using the following commands.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python3 plt3dplot_inj.py &lt;input file name&gt; &lt;metric&gt;
python3 plt3dplot_inj.py dataframe.csv CUMU  <span class="c"># Accumulates execution time of each API call</span>
python3 plt3dplot_inj.py dataframe.csv EXEC  <span class="c"># Application execution time</span>
python3 plt3dplot_inj.py dataframe.csv SCHED <span class="c"># Scheduling overhead</span>
</code></pre></div></div>

<h2 id="supplemental-exercise-2-integration-and-evaluation-of-eft-scheduler">Supplemental Exercise 2: Integration and Evaluation of EFT Scheduler</h2>
<p><a href="#fpga24-tutorial-archive">Return to top</a></p>

<p>Now navigate to <a href="https://github.com/UA-RCL/CEDR/tree/tutorial/scr-api/scheduler.cpp">scheduler.cpp</a>. This file contains various schedulers already tailored to work with CEDR. In this part of the tutorial, we will add the Earliest Finish Time(EFT) scheduler to CEDR. EFT heuristic schedules all the tasks in the <code class="language-plaintext highlighter-rouge">read queue</code> one by one based on the earliest expected finish time of the task on the available resources (processing elements – PE).</p>

<p>First, we will write the EFT scheduler as a C/C++ function. We will utilize the available variables for all the schedulers in CEDR. A list of the useful variables and their explanations can be found in the bulleted list below.</p>

<ul>
  <li>cedr_config: Information about the current configuration of CEDR</li>
  <li>ready_queue: Tasks ready to be scheduled at the time of the scheduling event</li>
  <li>hardware_thread_handle: List of hardware threads that manages the available resources (PEs)</li>
  <li>resource_mutex: Mutex protection for the available resources (PEs)</li>
  <li>free_resource_count: Number of free resources (PEs) at the time of scheduling event, only useful if PE queues are disabled – Not used in the tutorial</li>
</ul>

<p>Based on the available variables, we will construct the prototype of the EFT scheduler as shown:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="n">scheduleEFT</span><span class="p">(</span><span class="n">ConfigManager</span> <span class="o">&amp;</span><span class="n">cedr_config</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">deque</span><span class="o">&lt;</span><span class="n">task_nodes</span> <span class="o">*&gt;</span> <span class="o">&amp;</span><span class="n">ready_queue</span><span class="p">,</span> <span class="n">worker_thread</span> <span class="o">*</span><span class="n">hardware_thread_handle</span><span class="p">,</span> <span class="n">pthread_mutex_t</span> <span class="o">*</span><span class="n">resource_mutex</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="o">&amp;</span><span class="n">free_resource_count</span><span class="p">)</span>
</code></pre></div></div>

<p>Leveraging the available variables, we will implement the EFT in C/C++ step by step. First, we will handle the initializations, then the main loop body for task-to-PE mapping based on the heuristic, followed by the actual PE assignment for the task, and end with final checks. After implementing the scheduler, we will add the EFT scheduler as one of the schedulers for CEDR and enable it in the runtime config.</p>

<h3 id="initialization">Initialization</h3>

<p>Here we will initialize some of the required fields for the EFT heuristic. We will use this function’s start time as the reference current time while computing the expected finish time of a task on the PEs.</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">tasks_scheduled</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// Number of tasks scheduled so far</span>
  <span class="kt">int</span> <span class="n">eft_resource</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// ID of the PE that will be assigned to the task</span>
  <span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span> <span class="n">earliest_estimated_availtime</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// Estimated finish time initialization</span>
  <span class="n">bool</span> <span class="n">task_allocated</span><span class="p">;</span> <span class="c1">// Task assigned to PE successfully or not</span>

  <span class="cm">/* Get current time in nanosecond scale */</span>
  <span class="k">struct</span> <span class="n">timespec</span> <span class="n">curr_timespec</span> <span class="p">{};</span>
  <span class="n">clock_gettime</span><span class="p">(</span><span class="n">CLOCK_MONOTONIC_RAW</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">curr_timespec</span><span class="p">);</span>
  <span class="kt">long</span> <span class="kt">long</span> <span class="n">curr_time</span> <span class="o">=</span> <span class="n">curr_timespec</span><span class="p">.</span><span class="n">tv_nsec</span> <span class="o">+</span> <span class="n">curr_timespec</span><span class="p">.</span><span class="n">tv_sec</span> <span class="o">*</span> <span class="n">SEC2NANOSEC</span><span class="p">;</span>

  <span class="kt">long</span> <span class="kt">long</span> <span class="n">avail_time</span><span class="p">;</span> <span class="c1">// Current available time of the PEs</span>
  <span class="kt">long</span> <span class="kt">long</span> <span class="n">task_exec_time</span><span class="p">;</span> <span class="c1">// Estimated execution time of the task</span>

  <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">total_resources</span> <span class="o">=</span> <span class="n">cedr_config</span><span class="p">.</span><span class="n">getTotalResources</span><span class="p">();</span> <span class="c1">// Total Number of PEs available</span>
</code></pre></div></div>

<h3 id="eft-heuristic---task-to-pe-mapping">EFT heuristic - Task-to-PE mapping</h3>

<p>Here, we will have a double nested loop, where the outer loop will traverse all the tasks in the ready queue using the <code class="language-plaintext highlighter-rouge">ready_queue</code> variable. The inner loop will traverse all the PEs in the current runtime by indexing the <code class="language-plaintext highlighter-rouge">hardware_thread_handle</code>.</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1">// For loop to iterate over all tasks in Ready queue</span>
  <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="n">itr</span> <span class="o">=</span> <span class="n">ready_queue</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span> <span class="n">itr</span> <span class="o">!=</span> <span class="n">ready_queue</span><span class="p">.</span><span class="n">end</span><span class="p">();)</span> <span class="p">{</span>
    <span class="n">earliest_estimated_availtime</span> <span class="o">=</span> <span class="n">ULLONG_MAX</span><span class="p">;</span>
    <span class="c1">// For each task, iterate over all PEs to find the earliest finishing one</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">total_resources</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">auto</span> <span class="n">resourceType</span> <span class="o">=</span> <span class="n">hardware_thread_handle</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">thread_resource_type</span><span class="p">;</span> <span class="c1">// FFT, ZIP, GEMM, etc.</span>
      <span class="n">avail_time</span> <span class="o">=</span> <span class="n">hardware_thread_handle</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">thread_avail_time</span><span class="p">;</span> <span class="c1">// Based on estimated execution times of the tasks in the `todo_queue` of the PE</span>
      <span class="n">task_exec_time</span> <span class="o">=</span> <span class="n">cedr_config</span><span class="p">.</span><span class="n">getDashExecTime</span><span class="p">((</span><span class="o">*</span><span class="n">itr</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">task_type</span><span class="p">,</span> <span class="n">resourceType</span><span class="p">);</span> <span class="c1">// Estimated execution time of the task</span>
      <span class="k">auto</span> <span class="n">finishTime</span> <span class="o">=</span> <span class="p">(</span><span class="n">curr_time</span> <span class="o">&gt;=</span> <span class="n">avail_time</span><span class="p">)</span> <span class="o">?</span> <span class="n">curr_time</span> <span class="o">+</span> <span class="n">task_exec_time</span> <span class="o">:</span> <span class="n">avail_time</span> <span class="o">+</span> <span class="n">task_exec_time</span><span class="p">;</span> <span class="c1">// estimated finish time of the task on the PE at i^th index</span>
      <span class="k">auto</span> <span class="n">resourceIsSupported</span> <span class="o">=</span> <span class="p">((</span><span class="o">*</span><span class="n">itr</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">supported_resources</span><span class="p">[(</span><span class="kt">uint8_t</span><span class="p">)</span> <span class="n">resourceType</span><span class="p">]);</span> <span class="c1">// Check if the current PE support execution of this task</span>
      <span class="cm">/* Check if the PE supports the task and if the estimated finish time is earlier than what is found so far */</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">resourceIsSupported</span> <span class="o">&amp;&amp;</span> <span class="n">finishTime</span> <span class="o">&lt;</span> <span class="n">earliest_estimated_availtime</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">earliest_estimated_availtime</span> <span class="o">=</span> <span class="n">finishTime</span><span class="p">;</span>
        <span class="n">eft_resource</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
</code></pre></div></div>

<h3 id="eft-heuristic---task-to-pe-assignment">EFT heuristic - Task-to-PE assignment</h3>

<p>Here, we will utilize a built-in function that does final checks before assigning the task to the given PE. Based on this assignment, it also handles the actual queue management and modification of any required field. Details of this function can be found <a href="https://github.com/UA-RCL/CEDR/blob/tutorial/src-api/scheduler.cpp#L17-L64">here</a>.</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="c1">// Attempt to assign task on earliest finishing PE</span>
    <span class="n">task_allocated</span> <span class="o">=</span> <span class="n">attemptToAssignTaskToPE</span><span class="p">(</span>
      <span class="n">cedr_config</span><span class="p">,</span> <span class="c1">// Current configuration of the CEDR</span>
      <span class="p">(</span><span class="o">*</span><span class="n">itr</span><span class="p">),</span> <span class="c1">// Task that is being scheduled</span>
      <span class="o">&amp;</span><span class="n">hardware_thread_handle</span><span class="p">[</span><span class="n">eft_resource</span><span class="p">],</span> <span class="c1">// PE that is mapped to the task based on the heuristic</span>
      <span class="o">&amp;</span><span class="n">resource_mutex</span><span class="p">[</span><span class="n">eft_resource</span><span class="p">],</span> <span class="c1">// Mutex protection for the PE's todo queue</span>
      <span class="n">eft_resource</span> <span class="c1">// ID of the mapped PE</span>
      <span class="p">);</span>
</code></pre></div></div>

<h3 id="final-checks">Final checks</h3>

<p>In the last part, we will check whether the task assignment to given PE was successful and move on to the next task in the <code class="language-plaintext highlighter-rouge">ready queue</code>.</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">if</span> <span class="p">(</span><span class="n">task_allocated</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// If task allocated successfully</span>
      <span class="n">tasks_scheduled</span><span class="o">++</span><span class="p">;</span> <span class="c1">// Increment the number of scheduled tasks</span>
      <span class="n">itr</span> <span class="o">=</span> <span class="n">ready_queue</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span><span class="n">itr</span><span class="p">);</span> <span class="c1">// Remove the task from ready_queue</span>
      <span class="cm">/* If queueing is disabled, decrement free resource count*/</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">cedr_config</span><span class="p">.</span><span class="n">getEnableQueueing</span><span class="p">())</span> <span class="p">{</span>
        <span class="n">free_resource_count</span><span class="o">--</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">free_resource_count</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
          <span class="k">break</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="c1">// If task is not allocated successfully</span>
      <span class="n">itr</span><span class="o">++</span><span class="p">;</span> <span class="c1">// Go to the next task in ready_queue</span>
    <span class="p">}</span>
  <span class="err">}</span>
  <span class="k">return</span> <span class="n">tasks_scheduled</span><span class="p">;</span>
</code></pre></div></div>

<h3 id="full-eft-in-cc">Full EFT in C/C++</h3>

<p>Now collecting all the steps, we will have the EFT function written in C/C++ that is tailored to CEDR, as shown:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="nf">scheduleEFT</span><span class="p">(</span><span class="n">ConfigManager</span> <span class="o">&amp;</span><span class="n">cedr_config</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">deque</span><span class="o">&lt;</span><span class="n">task_nodes</span> <span class="o">*&gt;</span> <span class="o">&amp;</span><span class="n">ready_queue</span><span class="p">,</span> <span class="n">worker_thread</span> <span class="o">*</span><span class="n">hardware_thread_handle</span><span class="p">,</span> <span class="n">pthread_mutex_t</span> <span class="o">*</span><span class="n">resource_mutex</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="o">&amp;</span><span class="n">free_resource_count</span><span class="p">)</span> <span class="p">{</span>

  <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">tasks_scheduled</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// Number of tasks scheduled so far</span>
  <span class="kt">int</span> <span class="n">eft_resource</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// ID of the PE that will be assigned to the task</span>
  <span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span> <span class="n">earliest_estimated_availtime</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// Estimated finish time initialization</span>
  <span class="n">bool</span> <span class="n">task_allocated</span><span class="p">;</span> <span class="c1">// Task assigned to PE successfully or not</span>

  <span class="cm">/* Get current time in nanosecond scale */</span>
  <span class="k">struct</span> <span class="n">timespec</span> <span class="n">curr_timespec</span> <span class="p">{};</span>
  <span class="n">clock_gettime</span><span class="p">(</span><span class="n">CLOCK_MONOTONIC_RAW</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">curr_timespec</span><span class="p">);</span>
  <span class="kt">long</span> <span class="kt">long</span> <span class="n">curr_time</span> <span class="o">=</span> <span class="n">curr_timespec</span><span class="p">.</span><span class="n">tv_nsec</span> <span class="o">+</span> <span class="n">curr_timespec</span><span class="p">.</span><span class="n">tv_sec</span> <span class="o">*</span> <span class="n">SEC2NANOSEC</span><span class="p">;</span>

  <span class="kt">long</span> <span class="kt">long</span> <span class="n">avail_time</span><span class="p">;</span> <span class="c1">// Current available time of the PEs</span>
  <span class="kt">long</span> <span class="kt">long</span> <span class="n">task_exec_time</span><span class="p">;</span> <span class="c1">// Estimated execution time of the task</span>

  <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">total_resources</span> <span class="o">=</span> <span class="n">cedr_config</span><span class="p">.</span><span class="n">getTotalResources</span><span class="p">();</span> <span class="c1">// Total Number of PEs available</span>

  <span class="c1">// For loop to iterate over all tasks in Ready queue</span>
  <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="n">itr</span> <span class="o">=</span> <span class="n">ready_queue</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span> <span class="n">itr</span> <span class="o">!=</span> <span class="n">ready_queue</span><span class="p">.</span><span class="n">end</span><span class="p">();)</span> <span class="p">{</span>
    <span class="n">earliest_estimated_availtime</span> <span class="o">=</span> <span class="n">ULLONG_MAX</span><span class="p">;</span>
    <span class="c1">// For each task, iterate over all PEs to find the earliest finishing one</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">total_resources</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">auto</span> <span class="n">resourceType</span> <span class="o">=</span> <span class="n">hardware_thread_handle</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">thread_resource_type</span><span class="p">;</span> <span class="c1">// FFT, ZIP, GEMM, etc.</span>
      <span class="n">avail_time</span> <span class="o">=</span> <span class="n">hardware_thread_handle</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">thread_avail_time</span><span class="p">;</span> <span class="c1">// Based on estimated execution times of the tasks in the `todo_queue` of the PE</span>
      <span class="n">task_exec_time</span> <span class="o">=</span> <span class="n">cedr_config</span><span class="p">.</span><span class="n">getDashExecTime</span><span class="p">((</span><span class="o">*</span><span class="n">itr</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">task_type</span><span class="p">,</span> <span class="n">resourceType</span><span class="p">);</span> <span class="c1">// Estimated execution time of the task</span>
      <span class="k">auto</span> <span class="n">finishTime</span> <span class="o">=</span> <span class="p">(</span><span class="n">curr_time</span> <span class="o">&gt;=</span> <span class="n">avail_time</span><span class="p">)</span> <span class="o">?</span> <span class="n">curr_time</span> <span class="o">+</span> <span class="n">task_exec_time</span> <span class="o">:</span> <span class="n">avail_time</span> <span class="o">+</span> <span class="n">task_exec_time</span><span class="p">;</span> <span class="c1">// estimated finish time of the task on the PE at i^th index</span>
      <span class="k">auto</span> <span class="n">resourceIsSupported</span> <span class="o">=</span> <span class="p">((</span><span class="o">*</span><span class="n">itr</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">supported_resources</span><span class="p">[(</span><span class="kt">uint8_t</span><span class="p">)</span> <span class="n">resourceType</span><span class="p">]);</span> <span class="c1">// Check if the current PE support execution of this task</span>
      <span class="cm">/* Check if the PE supports the task and if the estimated finish time is earlier than what is found so far */</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">resourceIsSupported</span> <span class="o">&amp;&amp;</span> <span class="n">finishTime</span> <span class="o">&lt;</span> <span class="n">earliest_estimated_availtime</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">earliest_estimated_availtime</span> <span class="o">=</span> <span class="n">finishTime</span><span class="p">;</span>
        <span class="n">eft_resource</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">// Attempt to assign task on earliest finishing PE</span>
    <span class="n">task_allocated</span> <span class="o">=</span> <span class="n">attemptToAssignTaskToPE</span><span class="p">(</span>
      <span class="n">cedr_config</span><span class="p">,</span> <span class="c1">// Current configuration of the CEDR</span>
      <span class="p">(</span><span class="o">*</span><span class="n">itr</span><span class="p">),</span> <span class="c1">// Task that is being scheduled</span>
      <span class="o">&amp;</span><span class="n">hardware_thread_handle</span><span class="p">[</span><span class="n">eft_resource</span><span class="p">],</span> <span class="c1">// PE that is mapped to the task based on the heuristic</span>
      <span class="o">&amp;</span><span class="n">resource_mutex</span><span class="p">[</span><span class="n">eft_resource</span><span class="p">],</span> <span class="c1">// Mutex protection for the PE's todo queue</span>
      <span class="n">eft_resource</span> <span class="c1">// ID of the mapped PE</span>
      <span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">task_allocated</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// If task allocated successfully</span>
      <span class="n">tasks_scheduled</span><span class="o">++</span><span class="p">;</span> <span class="c1">// Increment the number of scheduled tasks</span>
      <span class="n">itr</span> <span class="o">=</span> <span class="n">ready_queue</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span><span class="n">itr</span><span class="p">);</span> <span class="c1">// Remove the task from ready_queue</span>
      <span class="cm">/* If queueing is disabled, decrement free resource count*/</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">cedr_config</span><span class="p">.</span><span class="n">getEnableQueueing</span><span class="p">())</span> <span class="p">{</span>
        <span class="n">free_resource_count</span><span class="o">--</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">free_resource_count</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
          <span class="k">break</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="c1">// If task is not allocated successfully</span>
      <span class="n">itr</span><span class="o">++</span><span class="p">;</span> <span class="c1">// Go to the next task in ready_queue</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="n">tasks_scheduled</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="adding-eft-as-a-scheduling-option">Adding EFT as a scheduling option</h3>

<p>Now, the only thing left is to ensure CEDR can run this function during scheduling events. To do this in the same <a href="https://github.com/UA-RCL/CEDR/tree/tutorial/scr-api/scheduler.cpp">scheduler.cpp</a> file, we go to the end and update the <a href="https://github.com/UA-RCL/CEDR/blob/tutorial/src-api/scheduler.cpp#L406">performScheduling</a> function. In the function where <code class="language-plaintext highlighter-rouge">sched_policy</code> is checked, we add another <code class="language-plaintext highlighter-rouge">else if</code> segment that checks whether the scheduling policy is <code class="language-plaintext highlighter-rouge">EFT</code>. If it is, we will call the function we just created.</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">else</span> <span class="nf">if</span> <span class="p">(</span><span class="n">sched_policy</span> <span class="o">==</span> <span class="s">"EFT"</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">tasks_scheduled</span> <span class="o">+=</span> <span class="n">scheduleEFT</span><span class="p">(</span><span class="n">cedr_config</span><span class="p">,</span> <span class="n">ready_queue</span><span class="p">,</span> <span class="n">hardware_thread_handle</span><span class="p">,</span> <span class="n">resource_mutex</span><span class="p">,</span> <span class="n">free_resource_count</span><span class="p">);</span>
  <span class="p">}</span>
</code></pre></div></div>

<p>After adding EFT as one of the scheduling heuristic options to CEDR, we will need to rebuild CEDR in the <code class="language-plaintext highlighter-rouge">build</code> directory. First, navigate to <a href="https://github.com/UA-RCL/CEDR/tree/tutorial/./">root directory</a>, then follow the steps below to rebuild CEDR with EFT.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>build
make <span class="nt">-j</span>
</code></pre></div></div>

<h3 id="enabling-eft-for-cedr">Enabling EFT for CEDR</h3>

<p>In the <a href="https://github.com/UA-RCL/CEDR/tree/tutorial/daemon_config.json">daemon_config.json</a> file, we updated the <a href="https://github.com/UA-RCL/CEDR/blob/tutorial/daemon_config.json#L35">“Scheduler”</a> field to be “EFT” before running CEDR with the updated daemon config file.</p>

<pre><code class="language-JSON">    "Scheduler": "EFT",
</code></pre>

<h3 id="running-cedr-with-eft-scheduler">Running CEDR with EFT Scheduler</h3>

<p>Using the same methods as in Section 3.2, we will run CEDR and see the use of the EFT scheduler. After running the following command, we will see that the scheduler to be used is selected as EFT in the displayed logs.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./cedr <span class="nt">-c</span> ./daemon_config.json <span class="nt">-l</span> VERBOSE | <span class="nb">grep</span> <span class="nt">-E</span> <span class="s2">"(Scheduler|scheduler)"</span> &amp;
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[...] DEBUG [312918] [ConfigManager::parseConfig@136] Config contains key 'Scheduler', assigning config value to &lt;b&gt;EFT&lt;/b&gt;
</code></pre></div></div>

<p>After submitting the application with <code class="language-plaintext highlighter-rouge">sub_dag</code>, we will see that the newly added EFT scheduler is used during the scheduling event.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./sub_dag <span class="nt">-a</span> ./radar_correlator_fft-x86.so <span class="nt">-n</span> 1 <span class="nt">-p</span> 0
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[...] DEBUG [312918] [performScheduling@475] Ready queue non-empty, performing task scheduling using &lt;b&gt;EFT&lt;/b&gt; scheduler.
[...] DEBUG [312918] [performScheduling@475] Ready queue non-empty, performing task scheduling using &lt;b&gt;EFT&lt;/b&gt; scheduler.
[...] DEBUG [312918] [performScheduling@475] Ready queue non-empty, performing task scheduling using &lt;b&gt;EFT&lt;/b&gt; scheduler.
</code></pre></div></div>

<p>Once everything is completed, we will terminate CEDR with <code class="language-plaintext highlighter-rouge">kill_daemon</code>.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./kill_daemon
</code></pre></div></div>

<h2 id="supplemental-exercise-3-introducing-a-new-api-call">Supplemental Exercise 3: Introducing a New API Call</h2>
<p><a href="#fpga24-tutorial-archive">Return to top</a></p>

<p>In this section of the tutorial, we will demonstrate integration of a new API call to the CEDR. We will use <code class="language-plaintext highlighter-rouge">DASH_ZIP</code> API call as an example.</p>

<p>Navigate to libdash folder from <a href="https://github.com/UA-RCL/CEDR/tree/tutorial/./">root directory</a>.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>libdash
</code></pre></div></div>

<p>Add the API function definitions to the <code class="language-plaintext highlighter-rouge">dash.h</code>.</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">DASH_ZIP_flt</span><span class="p">(</span><span class="n">dash_cmplx_flt_type</span><span class="o">*</span> <span class="n">input_1</span><span class="p">,</span> <span class="n">dash_cmplx_flt_type</span><span class="o">*</span> <span class="n">input_2</span><span class="p">,</span> <span class="n">dash_cmplx_flt_type</span><span class="o">*</span> <span class="n">output</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">size</span><span class="p">,</span> <span class="n">zip_op_t</span> <span class="n">op</span><span class="p">);</span>
<span class="kt">void</span> <span class="nf">DASH_ZIP_flt_nb</span><span class="p">(</span><span class="n">dash_cmplx_flt_type</span><span class="o">**</span> <span class="n">input_1</span><span class="p">,</span> <span class="n">dash_cmplx_flt_type</span><span class="o">**</span> <span class="n">input_2</span><span class="p">,</span> <span class="n">dash_cmplx_flt_type</span><span class="o">**</span> <span class="n">output</span><span class="p">,</span> <span class="kt">size_t</span><span class="o">*</span> <span class="n">size</span><span class="p">,</span> <span class="n">zip_op_t</span><span class="o">*</span> <span class="n">op</span><span class="p">,</span> <span class="n">cedr_barrier_t</span><span class="o">*</span> <span class="n">kernel_barrier</span><span class="p">);</span>

<span class="kt">void</span> <span class="nf">DASH_ZIP_int</span><span class="p">(</span><span class="n">dash_cmplx_int_type</span><span class="o">*</span> <span class="n">input_1</span><span class="p">,</span> <span class="n">dash_cmplx_int_type</span><span class="o">*</span> <span class="n">input_2</span><span class="p">,</span> <span class="n">dash_cmplx_int_type</span><span class="o">*</span> <span class="n">output</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">size</span><span class="p">,</span> <span class="n">zip_op_t</span> <span class="n">op</span><span class="p">);</span>
<span class="kt">void</span> <span class="nf">DASH_ZIP_int_nb</span><span class="p">(</span><span class="n">dash_cmplx_int_type</span><span class="o">**</span> <span class="n">input_1</span><span class="p">,</span> <span class="n">dash_cmplx_int_type</span><span class="o">**</span> <span class="n">input_2</span><span class="p">,</span> <span class="n">dash_cmplx_int_type</span><span class="o">**</span> <span class="n">output</span><span class="p">,</span> <span class="kt">size_t</span><span class="o">*</span> <span class="n">size</span><span class="p">,</span> <span class="n">zip_op_t</span><span class="o">*</span> <span class="n">op</span><span class="p">,</span> <span class="n">cedr_barrier_t</span><span class="o">*</span> <span class="n">kernel_barrier</span><span class="p">);</span>
</code></pre></div></div>

<p>There 4 different function definitions here:</p>
<ol>
  <li>DASH_ZIP_flt: Supports blocking ZIP calls for <code class="language-plaintext highlighter-rouge">dash_cmplx_flt_type</code>
</li>
  <li>DASH_ZIP_flt_nb: Supports non-blocking ZIP calls for <code class="language-plaintext highlighter-rouge">dash_cmplx_flt_type</code>
</li>
  <li>DASH_ZIP_int: Supports blocking ZIP calls for <code class="language-plaintext highlighter-rouge">dash_cmplx_int_type</code>
</li>
  <li>DASH_ZIP_int_nb: Supports non-blocking ZIP calls for <code class="language-plaintext highlighter-rouge">dash_cmplx_int_type</code>
</li>
</ol>

<p>Add supported ZIP operation enums to <code class="language-plaintext highlighter-rouge">dash_types.h</code></p>
<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">typedef</span> <span class="k">enum</span> <span class="n">zip_op</span> <span class="p">{</span>
  <span class="n">ZIP_ADD</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
  <span class="n">ZIP_SUB</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
  <span class="n">ZIP_MULT</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
  <span class="n">ZIP_DIV</span> <span class="o">=</span> <span class="mi">3</span>
<span class="p">}</span> <span class="n">zip_op_t</span><span class="p">;</span>
</code></pre></div></div>

<p>Add CPU implementation of the ZIP to <a href="https://github.com/UA-RCL/CEDR/tree/tutorial/libdash/cpu/">libdash/cpu</a> <code class="language-plaintext highlighter-rouge">zip.cpp</code>. For simplicity, we just copy the original implementation.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cp </span>original_files/zip.cpp libdash/cpu/
</code></pre></div></div>

<p>In <code class="language-plaintext highlighter-rouge">zip.cpp</code>, we also have the <code class="language-plaintext highlighter-rouge">enqueue_kernel</code> call in the API definition, which is how the task for this API will be sent to CEDR. A prototype of the <code class="language-plaintext highlighter-rouge">enqueue_kernel</code> function is given in line 12, and <code class="language-plaintext highlighter-rouge">enqueue_kernel</code> is used in non-blocking versions of the function (lines 83 and 113). The prototype is the same for all the APIs created for CEDR. The first argument has to be the function name, the second argument has to be the precision to be used, and the third argument shows how many inputs are needed for the calling function (for ZIP, this is 6). Now let’s look at the ZIP-specific <code class="language-plaintext highlighter-rouge">enqueue_kernel</code> call.</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">enqueue_kernel</span><span class="p">(</span><span class="s">"DASH_ZIP"</span><span class="p">,</span> <span class="s">"flt"</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="n">input_1</span><span class="p">,</span> <span class="n">input_2</span><span class="p">,</span> <span class="n">output</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span> <span class="n">kernel_barrier</span><span class="p">);</span>
</code></pre></div></div>

<p>In this sample <code class="language-plaintext highlighter-rouge">enqueue kernel</code> call, we have 4 important portions:</p>
<ul>
  <li>
<strong><em>“DASH_ZIP”</em></strong>: Name of the API call</li>
  <li>
<strong><em>“flt”</em></strong>: Type of the inputs on the API call</li>
  <li>
<strong><em>6</em></strong>: Number of variables for the API call</li>
  <li>Variables:
    <ul>
      <li>
<strong><em>input_1</em></strong>: First input of the ZIP</li>
      <li>
<strong><em>input_2</em></strong>: Second input of the ZIP</li>
      <li>
<strong><em>output</em></strong>: Output of the ZIP</li>
      <li>
<strong><em>size</em></strong>: Array size for inputs and output</li>
      <li>
<strong><em>op</em></strong>: ZIP operation type (ADD, SUB, MUL, or DIV)</li>
      <li>
<strong><em>kernel_barrier</em></strong>: Contains configuration information of barriers for blocking and non-blocking implementation</li>
    </ul>
  </li>
</ul>

<p>In the <code class="language-plaintext highlighter-rouge">zip.cpp</code>, we need to fill the bodies of the four function definitions that are used so the application will call <code class="language-plaintext highlighter-rouge">enqueue_kernel</code> properly and hand off the task to CEDR for scheduling:</p>

<ol>
  <li>DASH_ZIP_flt</li>
  <li>DASH_ZIP_flt_nb</li>
  <li>DASH_ZIP_int</li>
  <li>DASH_ZIP_int_nb</li>
</ol>

<p>We also implement two more functions, which contains implementation of CPU-based ZIP operations. Functions are created with <code class="language-plaintext highlighter-rouge">_cpu</code> suffix so that CEDR can identify the functions correctly for CPU execution:</p>

<ol>
  <li>DASH_ZIP_flt_cpu: <code class="language-plaintext highlighter-rouge">dash_cmplx_flt_type</code>
</li>
  <li>DASH_ZIP_int_cpu: <code class="language-plaintext highlighter-rouge">dash_cmplx_int_type</code>
</li>
</ol>

<p>Having included API implementation, we should introduce the new API call to the system by updating CEDR header file (<a href="https://github.com/UA-RCL/CEDR/tree/tutorial/src-api/include/header.hpp">./src-api/include/header.hpp</a>):</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>enum api_types {DASH_FFT = 0, DASH_GEMM = 1, DASH_FIR = 2, DASH_SpectralOpening = 3, DASH_CIC = 4, DASH_BPSK = 5, DASH_QAM16 = 6, DASH_CONV_2D = 7, DASH_CONV_1D = 8, &lt;b&gt;DASH_ZIP = 9,&lt;/b&gt; NUM_API_TYPES = &lt;b&gt;10&lt;/b&gt;};

static const char *api_type_names[] = {"DASH_FFT", "DASH_GEMM", "DASH_FIR", "DASH_SpectralOpening", "DASH_CIC", "DASH_BPSK", "DASH_QAM16", "DASH_CONV_2D", "DASH_CONV_1D"&lt;b&gt;, "DASH_ZIP"&lt;/b&gt;};
...
static const std::map&lt;std::string, api_types&gt; api_types_map = { {api_type_names[api_types::DASH_FFT], api_types::DASH_FFT},
                                                                {api_type_names[api_types::DASH_GEMM], api_types::DASH_GEMM},
                                                                {api_type_names[api_types::DASH_FIR], api_types::DASH_FIR},
                                                                {api_type_names[api_types::DASH_SpectralOpening], api_types::DASH_SpectralOpening},
                                                                {api_type_names[api_types::DASH_CIC], api_types::DASH_CIC},
                                                                {api_type_names[api_types::DASH_BPSK], api_types::DASH_BPSK},
                                                                {api_type_names[api_types::DASH_QAM16], api_types::DASH_QAM16},
                                                                {api_type_names[api_types::DASH_CONV_2D], api_types::DASH_CONV_2D},
                                                                {api_type_names[api_types::DASH_CONV_1D], api_types::DASH_CONV_1D},
                                                              &lt;b&gt;{api_type_names[api_types::DASH_ZIP], api_types::DASH_ZIP}&lt;/b&gt;};
</code></pre></div></div>

<p>Navigate to the build folder, re-generate the files, and check the <code class="language-plaintext highlighter-rouge">libdash-rt.so</code> shared object to verify the new ZIP-based function calls.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> ../build
cmake ..
make <span class="nt">-j</span> <span class="si">$(</span><span class="nb">nproc</span><span class="si">)</span>
nm <span class="nt">-D</span> libdash-rt/libdash-rt.so | <span class="nb">grep</span> <span class="nt">-E</span> <span class="s1">'*_ZIP_*'</span>
</code></pre></div></div>

<p>To verify, build lane detection application which utilizes ZIP API calls.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>applications/APIApps/lane_detection/
make fft_nb.so
<span class="nb">cp </span>track_nb.so image.png ../../../build/
</code></pre></div></div>

<p>Now, launch CEDR and submit lane detection application.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> ../../../build/
<span class="nb">rm</span> <span class="nt">-rf</span> log_dir/<span class="k">*</span>
./cedr <span class="nt">-c</span> ./daemon_config.json <span class="nt">-l</span> NONE &amp;
./sub_dag <span class="nt">-a</span> ./track_nb.so <span class="nt">-n</span> 1 <span class="nt">-p</span> 0
</code></pre></div></div>

<p>Let’s check the <code class="language-plaintext highlighter-rouge">timing_trace.log</code> for ZIP API calls.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat </span>log_dir/experiment0/timing_trace.log | <span class="nb">grep</span> <span class="nt">-E</span> <span class="s1">'*ZIP*'</span>
</code></pre></div></div>

<p>If you have a C++ based serial implementation of key kernels in your application, you can add your API call following the explanations in this section and replace your C++ kernel code with newly introduced API call following the Section 3.</p>

<h2 id="supplemental-exercise-4-running-multiple-applications-with-cedr-on-x86">Supplemental Exercise 4: Running Multiple Applications with CEDR on x86</h2>
<p><a href="#fpga24-tutorial-archive">Return to top</a></p>

<h3 id="compilation-of-applications">Compilation of Applications</h3>
<p>In this section, we will demonstrate CEDR’s ability to manage dynamically arriving applications. Assuming you already have built CEDR following the previous steps, we will directly delve into compiling and running two new applications that are lane detection and pulse doppler.</p>

<p>Firstly, navigate to lane detection folder from the root folder of the repository, compile it for x86 and move shared object and input files to <code class="language-plaintext highlighter-rouge">build</code> folder for running with CEDR. (If you have already done this for the previous section, you don’t have to compile the lane detection once more.)</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>applications/APIApps/lane_detection/
make fft_nb.so
<span class="nb">cp </span>track_nb.so image.png ../../../build
</code></pre></div></div>

<p>Now, let’s do the above steps for pulse doppler application and create a output directory in <code class="language-plaintext highlighter-rouge">build</code> for writing its output.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> ../pulse_doppler/
make nonblocking
<span class="nb">cp</span> <span class="nt">-r</span> pulse_doppler-nb-x86.so input/ ../../../build
<span class="nb">mkdir</span> ../../../build/output
</code></pre></div></div>

<h3 id="running-the-applications-with-cedr">Running the Applications with CEDR</h3>

<p>Now that we have all binaries and input files ready, we can proceed with running these applications with CEDR. First, navigate to <code class="language-plaintext highlighter-rouge">build</code> directory.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> ../../../build
</code></pre></div></div>

<p>Then, launch CEDR with your desired configuration and submit both applications with varying number of instances and injection rates.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./cedr <span class="nt">-c</span> ./daemon_config.json <span class="nt">-l</span> NONE &amp;
./sub_dag <span class="nt">-a</span> ./track_nb.so,./pulse_doppler-nb-x86.so <span class="nt">-n</span> 1,5 <span class="nt">-p</span> 0,100
</code></pre></div></div>

<p>Observe the <a href="./build/output_fft.png">output image of lane detection</a> and the <a href="./build/output/pulse_doppler_output.txt">shift and time delay</a> calculated by pulse doppler.</p>

<h2 id="supplemental-exercise-5-gpu-based-soc-experiment-nvidia-jetson-agx-xavier">Supplemental Exercise 5: GPU Based SoC Experiment (Nvidia Jetson AGX Xavier)</h2>
<p><a href="#fpga24-tutorial-archive">Return to top</a></p>

<h3 id="building-cedr">Building CEDR</h3>
<p>Firstly, we need to connect to the Nvidia Jetson board through ssh connection.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh &lt;user-name&gt;@&lt;jetson-ip&gt;
</code></pre></div></div>

<p>Clone CEDR from GitHub using one of the following methods <b>(we need to add one more line that’s checking out to tutorial branch)</b>:</p>
<ul>
  <li>Clone with ssh:
    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git clone <span class="nt">-b</span> tutorial git@github.com:UA-RCL/CEDR.git
</code></pre></div>    </div>
  </li>
  <li>Clone with https:
    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git clone <span class="nt">-b</span> tutorial https://github.com/UA-RCL/CEDR.git
</code></pre></div>    </div>
  </li>
</ul>

<p>Then, we can build CEDR. Cross compiler is not necessary in this case since we are already logged into the host machine. We enable <code class="language-plaintext highlighter-rouge">GPU</code> flag for the CMake to be able to make use of the GPU as an accelerator.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir </span>build
<span class="nb">cd </span>build
cmake <span class="nt">-DLIBDASH_MODULES</span><span class="o">=</span><span class="s2">"GPU"</span> ../
make <span class="nt">-j</span> -<span class="si">$(</span><span class="nb">nproc</span><span class="si">)</span>
</code></pre></div></div>

<h3 id="compilation">Compilation</h3>

<p>Now, we can compile the lane detection application running the following commands. This creates an executable shared object that we will move to <code class="language-plaintext highlighter-rouge">build</code> folder along with input image to run the <code class="language-plaintext highlighter-rouge">lane_detection</code>:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> ../applications/APIApps/lane_detection/
make fft_nb.so
<span class="nb">cp </span>track_nb.so image.png ../../../build/
</code></pre></div></div>

<p>Also, let’s compile the pulse doppler application running the following commands and move shared object and input to ‘build’ folder:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> ../pulse_doppler/
make nonblocking
<span class="nb">cp</span> <span class="nt">-r</span> pulse_doppler-nb-x86.so input/ ../../../build/
</code></pre></div></div>

<h3 id="running-the-applications-with-cedr-1">Running the Applications with CEDR</h3>

<p>Now, we need to go back to <code class="language-plaintext highlighter-rouge">build</code> folder and move <code class="language-plaintext highlighter-rouge">daemon_config.json</code> to it. Also, create a <code class="language-plaintext highlighter-rouge">output</code> folder for storing <code class="language-plaintext highlighter-rouge">pulse doppler</code> output:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> ../../../build/
<span class="nb">cp</span> ../daemon_config.json ./
<span class="nb">mkdir </span>output/
</code></pre></div></div>

<p>We should enable <code class="language-plaintext highlighter-rouge">GPU</code> in <code class="language-plaintext highlighter-rouge">daemon_config.json</code> so that runtime will use it as a computing resource.</p>

<pre><code class="language-JSON">"Worker Threads": {
        "cpu": 7,
        "fft": 0,
        "gemm": 0,
        "gpu": 1
    },
...
"Loosen Thread Permissions": true,
</code></pre>

<p>Execution of CEDR is the same as the x86_64 version. In one terminal launch CEDR:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./cedr <span class="nt">-c</span> ./daemon_config.json <span class="nt">-l</span> NONE &amp;
</code></pre></div></div>

<p>In another terminal, we will submit an instance of <code class="language-plaintext highlighter-rouge">lane_detection</code> and five instances of <code class="language-plaintext highlighter-rouge">pulse doppler</code> using <code class="language-plaintext highlighter-rouge">sub_dag</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./sub_dag <span class="nt">-a</span> ./track_nb.so,./pulse_doppler-nb-x86.so <span class="nt">-n</span> 1,5 <span class="nt">-p</span> 0,100
</code></pre></div></div>

<p>Now kill the CEDR by running <code class="language-plaintext highlighter-rouge">./kill_deamon</code> on the second terminal and check the resource_name fields for the first 5 FFT tasks:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">head</span> <span class="nt">-n</span> 10 ./log_dir/experiment0/timing_trace.log
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>app_id: 3, app_name: track_nb, task_id: 0, task_name: DASH_FFT, resource_name: &lt;b&gt;cpu1&lt;/b&gt;, ref_start_time: 15215236842193792, ref_stop_time: 15215236873412128, actual_exe_time: 31218336
app_id: 3, app_name: track_nb, task_id: 1, task_name: DASH_FFT, resource_name: &lt;b&gt;cpu2&lt;/b&gt;, ref_start_time: 15215236842244288, ref_stop_time: 15215236873341824, actual_exe_time: 31097536
app_id: 3, app_name: track_nb, task_id: 2, task_name: DASH_FFT, resource_name: &lt;b&gt;cpu3&lt;/b&gt;, ref_start_time: 15215236842259136, ref_stop_time: 15215236873367616, actual_exe_time: 31108480
app_id: 3, app_name: track_nb, task_id: 3, task_name: DASH_FFT, resource_name: &lt;b&gt;cpu4&lt;/b&gt;, ref_start_time: 15215236842278592, ref_stop_time: 15215236873329504, actual_exe_time: 31050912
app_id: 3, app_name: track_nb, task_id: 4, task_name: DASH_FFT, resource_name: &lt;b&gt;cpu5&lt;/b&gt;, ref_start_time: 15215236842303616, ref_stop_time: 15215236873309984, actual_exe_time: 31006368
app_id: 3, app_name: track_nb, task_id: 7, task_name: DASH_FFT, resource_name: &lt;b&gt;gpu1&lt;/b&gt;, ref_start_time: 15215236842359360, ref_stop_time: 15215236878110208, actual_exe_time: 35750848
app_id: 3, app_name: track_nb, task_id: 5, task_name: DASH_FFT, resource_name: &lt;b&gt;cpu6&lt;/b&gt;, ref_start_time: 15215236842560224, ref_stop_time: 15215236873353824, actual_exe_time: 30793600
app_id: 3, app_name: track_nb, task_id: 6, task_name: DASH_FFT, resource_name: &lt;b&gt;cpu7&lt;/b&gt;, ref_start_time: 15215236843057888, ref_stop_time: 15215236873386784, actual_exe_time: 30328896
app_id: 3, app_name: track_nb, task_id: 11, task_name: DASH_FFT, resource_name: &lt;b&gt;cpu4&lt;/b&gt;, ref_start_time: 15215236873349088, ref_stop_time: 15215236873802944, actual_exe_time: 453856
app_id: 3, app_name: track_nb, task_id: 9, task_name: DASH_FFT, resource_name: &lt;b&gt;cpu2&lt;/b&gt;, ref_start_time: 15215236873349440, ref_stop_time: 15215236873780032, actual_exe_time: 430592
</code></pre></div></div>

<p>Lastly, let’s compare the outputs with x86 results to validate the correctness.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>xdg-open output_fft.png
<span class="nb">cat </span>output/pulse_doppler_output.txt
</code></pre></div></div>

<h1 id="contact">Contact</h1>

<p>For any questions and bug reports, please email <a href="mailto:jmack2545@arizona.edu">jmack2545@arizona.edu</a>, <a href="mailto:gener@arizona.edu">gener@arizona.edu</a>, or <a href="mailto:suluhan@arizona.edu">suluhan@arizona.edu</a>.</p>
  </section>


    </main>
    


<footer class="background" style="--image: url('/images/background_v4.jpg')" data-dark="true" data-size="wide">
  <!--
    <div>
      Extra details like contact info or address
    </div>
  -->

  <div>
    
      
      
      



  <div class="button-wrapper">
    <a class="button" href="mailto:akoglu@arizona.edu" data-tooltip="Email" data-style="bare" aria-label="Email" target="_blank" rel="noopener noreferrer">
      <i class="icon fa-solid fa-envelope"></i>
      
    </a>
  </div>


    
      
      
      



  <div class="button-wrapper">
    <a class="button" href="https://scholar.google.com/citations?user=JeiSWR8AAAAJ&hl=en" data-tooltip="Google Scholar" data-style="bare" aria-label="Google Scholar" target="_blank" rel="noopener noreferrer">
      <i class="icon fa-brands fa-google"></i>
      
    </a>
  </div>


    
      
      
      



  <div class="button-wrapper">
    <a class="button" href="https://github.com/UA-RCL" data-tooltip="GitHub" data-style="bare" aria-label="GitHub" target="_blank" rel="noopener noreferrer">
      <i class="icon fa-brands fa-github"></i>
      
    </a>
  </div>


    
  </div>

  <div>
    © 2025
    UA-RCL
      |   Built with
    <a href="https://github.com/greenelab/lab-website-template">
      Lab Website Template
    </a>
  </div>

  <input type="checkbox" class="dark-toggle" data-tooltip="Dark mode" aria-label="toggle dark mode" oninput="onDarkToggleChange(event)">
</footer>

  </body>
</html>
